import{j as e,M as G,I as A}from"./index-D_DTgdmv.js";import{r as o}from"./vendor-DW3XjTa1.js";import{a as P}from"./appData-CcGvUiwD.js";import"./firebase-ARhtPVQA.js";import"./utils-B2rxisVD.js";const $="sloane_academy_admin_resources_v1",U="sloane_academy_admin_activity_v1",x=P?.cohorts,F=P?.startups,E=[{id:"demo-resource-1",cohortId:x?.[0]?.id,cohortName:x?.[0]?.name,moduleTitle:"Module 1: Fintech Innovations",summary:"Updated slide deck plus facilitator notes for onboarding session.",resourceType:"Slide deck",deliveryMode:"Facilitated workshop",duration:"90 min",link:"https://drive.google.com/",status:"Published",uploadedBy:"Sloane Academy Ops",addedAt:new Date(Date.now()-1e3*60*60*24*6).toISOString()},{id:"demo-resource-2",cohortId:x?.[1]?.id,cohortName:x?.[1]?.name,moduleTitle:"Customer Discovery Interview Guide",summary:"Template questions for partners to use during week 2 coaching.",resourceType:"Worksheet",deliveryMode:"Self-paced",duration:"45 min",status:"Pending review",uploadedBy:"Assupol Partner Team",addedAt:new Date(Date.now()-1e3*60*60*24*2).toISOString()}],J={s1:{startupId:"s1",startupName:"AfriTech",cohortName:x?.[0]?.name,completion:68,timeSpentHours:32,activeLearners:5,riskLevel:"Needs focus",lastActivity:new Date(Date.now()-1e3*60*60*18).toISOString()},s2:{startupId:"s2",startupName:"FinConnect",cohortName:x?.[1]?.name,completion:82,timeSpentHours:28,activeLearners:4,riskLevel:"On track",lastActivity:new Date(Date.now()-1e3*60*60*8).toISOString()},s3:{startupId:"s3",startupName:"RetailFlow",cohortName:x?.[2]?.name,completion:41,timeSpentHours:19,activeLearners:3,riskLevel:"At risk",lastActivity:new Date(Date.now()-1e3*60*60*72).toISOString()}};function V(){try{const a=localStorage.getItem($);if(!a)return[];const d=JSON.parse(a);return Array.isArray(d)?d.filter(m=>m?.id):[]}catch{return[]}}function Y(a){try{localStorage.setItem($,JSON.stringify(a))}catch{}}function K(){try{const a=localStorage.getItem(U);if(!a)return[];const d=JSON.parse(a);return Array.isArray(d)?d.filter(m=>m?.id):[]}catch{return[]}}function Q(a){try{localStorage.setItem(U,JSON.stringify(a))}catch{}}function y(a){const d=new Date(a);return Number.isNaN(d.getTime())?"Unknown":new Intl.DateTimeFormat("en-ZA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(d)}function Z(a){return a>=75?"On track":a>=50?"Needs focus":"At risk"}function ae(){const a=o.useMemo(()=>Array.isArray(x)?x:[],[]),d=o.useMemo(()=>Array.isArray(F)?F:[],[]),[m,L]=o.useState(()=>{const s=V();return s.length?s:E}),[v,T]=o.useState(()=>{const s=K();return s.length?s:E.slice(0,3).map(t=>({id:`log-${t.id}`,message:`${t.status==="Published"?"Published":"Queued"} ${t.resourceType.toLowerCase()} · ${t.moduleTitle}`,at:t.addedAt}))});o.useEffect(()=>Y(m),[m]),o.useEffect(()=>Q(v),[v]);const S=o.useRef(null),[k,C]=o.useState(null),[I,D]=o.useState(null),[i,M]=o.useState({cohortId:a[0]?.id??"",moduleTitle:"",summary:"",resourceType:"Video",deliveryMode:"Self-paced",duration:"",link:"",uploadedBy:""}),h=o.useMemo(()=>{const s=[],t=a.length?a:[{id:"general",name:"General"}];return d.slice(0,6).forEach((c,l)=>{const r=J[c.id],j=a.find(f=>f.id===(c.cohort||""))||(r?.cohortName?a.find(f=>f.name===r.cohortName):void 0)||t[l%t.length],n=r?.completion??Math.max(25,60-l*5),u={startupId:c.id,startupName:c.name,cohortName:j?.name??"General",completion:n,timeSpentHours:r?.timeSpentHours??Math.max(10,30-l*3),activeLearners:r?.activeLearners??Math.max(2,5-l),riskLevel:r?.riskLevel??Z(n),lastActivity:r?.lastActivity??new Date(Date.now()-1e3*60*60*(l+12)).toISOString()};s.push(u)}),s.length||s.push({startupId:"demo",startupName:"Sample Startup",cohortName:t[0]?.name??"Sloane Academy",completion:55,timeSpentHours:18,activeLearners:3,riskLevel:"Needs focus",lastActivity:new Date().toISOString()}),s},[d,a]),b=o.useMemo(()=>{const s=h.length,t=h.reduce((n,u)=>n+u.completion,0),c=s?Math.round(t/s):0,l=h.reduce((n,u)=>n+u.timeSpentHours,0),r=h.reduce((n,u)=>n+u.activeLearners,0),j=h.filter(n=>n.riskLevel!=="On track").length;return{avgCompletion:c,activeHours:l,activeLearners:r,alerts:j,total:s}},[h]),[N,_]=o.useState("all"),[g,H]=o.useState("all"),R=o.useMemo(()=>h.filter(s=>{const t=N==="all"||s.cohortName===N,c=g==="all"||g==="on-track"&&s.riskLevel==="On track"||g==="needs-focus"&&s.riskLevel==="Needs focus"||g==="at-risk"&&s.riskLevel==="At risk";return t&&c}),[h,N,g]);function w(s){D(s),window.setTimeout(()=>D(null),3200)}function p(s){const{name:t,value:c}=s.target;M(l=>({...l,[t]:c}))}function B(s){const t=s.target.files?.[0]??null;C(t?t.name:null)}function q(s){if(s.preventDefault(),!i.moduleTitle.trim()){w("Provide a module title before submitting.");return}const t=a.find(r=>r.id===i.cohortId)??a[0]??{id:"general",name:"General"},c=new Date().toISOString(),l={id:`res-${Date.now()}`,cohortId:t.id,cohortName:t.name,moduleTitle:i.moduleTitle.trim(),summary:i.summary.trim(),resourceType:i.resourceType,deliveryMode:i.deliveryMode,duration:i.duration.trim()||"Self-paced",link:i.link.trim()||void 0,attachmentName:k,status:"Pending review",uploadedBy:i.uploadedBy.trim()||"Partner portal",addedAt:c};L(r=>[l,...r]),T(r=>[{id:`log-${l.id}`,message:`Submitted ${l.resourceType.toLowerCase()} for ${l.moduleTitle}`,at:c},...r].slice(0,12)),M(r=>({...r,moduleTitle:"",summary:"",duration:"",link:""})),C(null),S.current&&(S.current.value=""),w("Resource submitted for review.")}function O(s,t){L(l=>l.map(r=>r.id===s?{...r,status:t}:r));const c=m.find(l=>l.id===s);c&&T(l=>[{id:`log-${s}-${t}`,message:`${t} · ${c.moduleTitle}`,at:new Date().toISOString()},...l].slice(0,12))}function W(){const s=["Cohort","Module","Type","Delivery","Duration","Status","Uploaded by","Added at"],t=m.map(n=>[n.cohortName,n.moduleTitle,n.resourceType,n.deliveryMode,n.duration,n.status,n.uploadedBy,y(n.addedAt)]),c=[s,...t].map(n=>n.map(u=>`"${String(u??"").replace(/"/g,'""')}"`).join(",")).join(`
`),l=new Blob([c],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(l),j=document.createElement("a");j.href=r,j.download=`sloane-academy-resources-${Date.now()}.csv`,j.click(),URL.revokeObjectURL(r),w("Exporting resource library.")}return e.jsx(G,{children:e.jsx("div",{className:"container-fluid py-4",children:e.jsxs("div",{className:"row g-24",children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card radius-16 border-0 shadow-sm p-24 bg-base",children:e.jsxs("div",{className:"row g-16 align-items-center",children:[e.jsxs("div",{className:"col-12 col-lg-8",children:[e.jsx("span",{className:"badge bg-neutral-100 text-primary-700 mb-12",children:"Partner console"}),e.jsx("h1",{className:"mb-12",children:"Sloane Academy admin"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Upload programme materials, publish partner updates, and monitor startup engagement across cohorts. Use the filters to surface teams that need support."})]}),e.jsx("div",{className:"col-12 col-lg-4 text-lg-end d-flex d-lg-block gap-12 justify-content-start",children:e.jsxs("button",{type:"button",className:"btn btn-outline-primary-600 px-24",onClick:W,children:[e.jsx(A,{icon:"mdi:tray-arrow-down",className:"me-6"})," Export library"]})})]})})}),I&&e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"alert alert-success mb-0",children:I})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row g-16",children:[e.jsx("div",{className:"col-6 col-lg-3",children:e.jsxs("div",{className:"card radius-12 p-16 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Average completion"}),e.jsxs("h3",{className:"mt-12 mb-4",children:[b.avgCompletion,"%"]}),e.jsxs("small",{className:"text-success-600",children:[e.jsx(A,{icon:"mdi:trending-up"})," ",b.total," active teams"]})]})}),e.jsx("div",{className:"col-6 col-lg-3",children:e.jsxs("div",{className:"card radius-12 p-16 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Learner hours logged"}),e.jsx("h3",{className:"mt-12 mb-4",children:b.activeHours}),e.jsx("small",{className:"text-secondary-light",children:"Across tracked startups"})]})}),e.jsx("div",{className:"col-6 col-lg-3",children:e.jsxs("div",{className:"card radius-12 p-16 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Active learners"}),e.jsx("h3",{className:"mt-12 mb-4",children:b.activeLearners}),e.jsx("small",{className:"text-secondary-light",children:"Seats engaged this week"})]})}),e.jsx("div",{className:"col-6 col-lg-3",children:e.jsxs("div",{className:"card radius-12 p-16 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Needs attention"}),e.jsx("h3",{className:"mt-12 mb-4",children:b.alerts}),e.jsx("small",{className:"text-danger-600",children:"Cohorts below target"})]})})]})}),e.jsx("div",{className:"col-12 col-xl-5",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base h-100",children:[e.jsx("h4",{className:"mb-16",children:"Submit learning material"}),e.jsx("p",{className:"text-secondary-light mb-16",children:"Attach decks, worksheets, or recordings. Submissions move to review before being published to the academy catalogue."}),e.jsxs("form",{onSubmit:q,className:"d-flex flex-column gap-16",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Programme"}),e.jsx("select",{className:"form-select",name:"cohortId",value:i.cohortId,onChange:p,required:!0,children:a.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Module title"}),e.jsx("input",{type:"text",className:"form-control",name:"moduleTitle",placeholder:"e.g. Designing for financial literacy",value:i.moduleTitle,onChange:p,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Summary"}),e.jsx("textarea",{className:"form-control",name:"summary",rows:3,placeholder:"What should founders expect from this material?",value:i.summary,onChange:p})]}),e.jsxs("div",{className:"row g-12",children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{className:"form-label",children:"Resource type"}),e.jsxs("select",{className:"form-select",name:"resourceType",value:i.resourceType,onChange:p,children:[e.jsx("option",{children:"Video"}),e.jsx("option",{children:"Slide deck"}),e.jsx("option",{children:"Worksheet"}),e.jsx("option",{children:"Templates"}),e.jsx("option",{children:"Reading"})]})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{className:"form-label",children:"Delivery mode"}),e.jsxs("select",{className:"form-select",name:"deliveryMode",value:i.deliveryMode,onChange:p,children:[e.jsx("option",{children:"Self-paced"}),e.jsx("option",{children:"Facilitated workshop"}),e.jsx("option",{children:"Coaching session"}),e.jsx("option",{children:"Live webinar"})]})]})]}),e.jsxs("div",{className:"row g-12",children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{className:"form-label",children:"Duration"}),e.jsx("input",{type:"text",className:"form-control",name:"duration",placeholder:"e.g. 45 min",value:i.duration,onChange:p})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{className:"form-label",children:"Access link"}),e.jsx("input",{type:"url",className:"form-control",name:"link",placeholder:"https://",value:i.link,onChange:p})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Attach file"}),e.jsx("input",{type:"file",className:"form-control",onChange:B,ref:S}),k&&e.jsxs("small",{className:"text-secondary-light d-block mt-4",children:["Attachment: ",k]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Uploaded by"}),e.jsx("input",{type:"text",className:"form-control",name:"uploadedBy",placeholder:"e.g. Microsoft partner lead",value:i.uploadedBy,onChange:p})]}),e.jsx("button",{type:"submit",className:"btn btn-primary-600",children:"Submit for review"})]})]})}),e.jsx("div",{className:"col-12 col-xl-7",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base h-100",children:[e.jsx("div",{className:"d-flex flex-column flex-md-row justify-content-between gap-12 mb-16",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4",children:"Resource library"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Track drafts, review queue, and published material across cohorts."})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Module"}),e.jsx("th",{children:"Cohort"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Updated"}),e.jsx("th",{className:"text-end",children:"Actions"})]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-medium",children:s.moduleTitle}),e.jsx("small",{className:"text-secondary-light",children:s.summary||"—"})]}),e.jsx("td",{children:s.cohortName}),e.jsx("td",{children:s.resourceType}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.status==="Published"?"bg-success-100 text-success-700":s.status==="Pending review"?"bg-warning-100 text-warning-700":"bg-neutral-100 text-neutral-700"}`,children:s.status})}),e.jsx("td",{children:y(s.addedAt)}),e.jsx("td",{className:"text-end",children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[s.status!=="Published"&&e.jsx("button",{type:"button",className:"btn btn-outline-success-600",onClick:()=>O(s.id,"Published"),children:"Publish"}),s.status!=="Draft"&&e.jsx("button",{type:"button",className:"btn btn-outline-primary-600",onClick:()=>O(s.id,"Draft"),children:"Move to draft"}),s.link&&e.jsx("a",{className:"btn btn-outline-secondary",href:s.link,target:"_blank",rel:"noreferrer",children:"Open"})]})})]},s.id))})]})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base",children:[e.jsxs("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-12 mb-16",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4",children:"Startup learning performance"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Monitor progress across tracked startups. Use filters to spot teams falling behind."})]}),e.jsxs("div",{className:"d-flex gap-12 flex-wrap",children:[e.jsxs("select",{className:"form-select",value:N,onChange:s=>_(s.target.value),children:[e.jsx("option",{value:"all",children:"All cohorts"}),[...new Set(h.map(s=>s.cohortName))].map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{className:"form-select",value:g,onChange:s=>H(s.target.value),children:[e.jsx("option",{value:"all",children:"All statuses"}),e.jsx("option",{value:"on-track",children:"On track"}),e.jsx("option",{value:"needs-focus",children:"Needs focus"}),e.jsx("option",{value:"at-risk",children:"At risk"})]})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Startup"}),e.jsx("th",{children:"Cohort"}),e.jsx("th",{style:{width:"22%"},children:"Completion"}),e.jsx("th",{children:"Hours"}),e.jsx("th",{children:"Learners"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Last activity"})]})}),e.jsxs("tbody",{children:[R.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.startupName}),e.jsx("td",{children:s.cohortName}),e.jsxs("td",{children:[e.jsx("div",{className:"progress",style:{height:10},children:e.jsx("div",{className:`progress-bar ${s.riskLevel==="On track"?"bg-success-600":s.riskLevel==="Needs focus"?"bg-warning-600":"bg-danger-600"}`,role:"progressbar",style:{width:`${s.completion}%`},"aria-valuenow":s.completion,"aria-valuemin":0,"aria-valuemax":100})}),e.jsxs("small",{className:"text-secondary-light",children:[s.completion,"%"]})]}),e.jsx("td",{children:s.timeSpentHours}),e.jsx("td",{children:s.activeLearners}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.riskLevel==="On track"?"bg-success-100 text-success-700":s.riskLevel==="Needs focus"?"bg-warning-100 text-warning-700":"bg-danger-100 text-danger-700"}`,children:s.riskLevel})}),e.jsx("td",{children:y(s.lastActivity)})]},s.startupId)),!R.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-secondary-light py-24",children:"No startups match the current filters."})})]})]})})]})}),e.jsx("div",{className:"col-12 col-xl-5",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base h-100",children:[e.jsx("h5",{className:"mb-16",children:"Activity log"}),e.jsxs("ul",{className:"list-unstyled d-flex flex-column gap-12 mb-0",children:[v.slice(0,6).map(s=>e.jsxs("li",{className:"border radius-12 p-16",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-6",children:[e.jsx("span",{className:"fw-medium",children:s.message}),e.jsx(A,{icon:"mdi:clock-outline",className:"text-neutral-400",width:18,height:18})]}),e.jsx("small",{className:"text-secondary-light",children:y(s.at)})]},s.id)),!v.length&&e.jsx("li",{className:"text-secondary-light",children:"No activity recorded yet."})]})]})}),e.jsx("div",{className:"col-12 col-xl-7",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base h-100",children:[e.jsx("h5",{className:"mb-16",children:"Partner actions"}),e.jsxs("div",{className:"row g-16",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"border radius-12 p-16 h-100",children:[e.jsx("h6",{className:"mb-8",children:"Upcoming tasks"}),e.jsxs("ul",{className:"list-unstyled mb-0 text-secondary-light d-flex flex-column gap-6",children:[e.jsx("li",{children:"• Finalise AWS mentor list for week 3 clinics"}),e.jsx("li",{children:"• Upload recordings from Cape Town founders session"}),e.jsx("li",{children:"• Share updated onboarding checklist with cohorts"})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"border radius-12 p-16 h-100",children:[e.jsx("h6",{className:"mb-8",children:"Support requests"}),e.jsxs("ul",{className:"list-unstyled mb-0 text-secondary-light d-flex flex-column gap-6",children:[e.jsx("li",{children:"• AfriTech: Needs design thinking coach for sprint"}),e.jsx("li",{children:"• RetailFlow: Requesting investor readiness review"}),e.jsx("li",{children:"• FinConnect: Waiting on compliance template"})]})]})})]})]})})]})})})}export{ae as default};
