import{v as $,a as d,i as m,A as L,j as e,M as T,D as z}from"./index-D4OG-ef-.js";import{B as _}from"./Breadcrumb-CCLJDH6r.js";import{r as o}from"./vendor-CSSB0Yhz.js";import"./firebase-ARhtPVQA.js";import"./utils-B2rxisVD.js";function Z(){const[v,y]=o.useState(!0),[f,h]=o.useState([]),[N,S]=o.useState([]),[B,k]=o.useState([]),[p,D]=o.useState("subscriptions"),[E,g]=o.useState(""),[x,j]=o.useState({}),[V,X]=o.useState(!1),w=o.useMemo(()=>sessionStorage.getItem("tenantId")||"vendor",[]),{appData:P}=$(),b=o.useMemo(()=>Array.isArray(P?.services)?P.services:[],[P]),I=o.useCallback(async s=>{if(!s.size)return[];const a=Math.max(50,Math.min(500,s.size*3));try{const{data:i}=await d.get("/api/data/services",{params:{page:1,pageSize:a},suppressToast:!0,suppressErrorLog:!0}),t=(Array.isArray(i?.items)?i.items:[]).filter(u=>s.has(String(u?.id??""))),n=new Set(t.map(u=>String(u?.id??"")));if(n.size!==s.size&&b.length){const u=[...s].filter(r=>!n.has(r));if(u.length){const r=b.filter(c=>u.includes(String(c?.id??"")));if(r.length)return[...t,...r]}}return t}catch(i){if(console.warn("Failed to fetch services from API; using appData fallback",i),b.length)return b.filter(l=>s.has(String(l?.id??"")));throw i}},[b]),C=o.useCallback(async()=>{try{console.log("🔗 Testing API connection..."),console.log("🔗 Current API base URL:",d.defaults.baseURL);const s=await d.get("/api/health");if(console.log("✅ API health check passed:",s.data),m.currentUser){console.log("🔐 Testing authenticated endpoint...");const a=await d.get("/api/subscriptions/my");console.log("✅ Subscriptions endpoint test:",a.data)}}catch(s){console.error("❌ API connection test failed:",s),console.error("❌ Error details:",s?.response?.data)}},[]);o.useEffect(()=>{C()},[C]);const A=o.useCallback(async(s={})=>{const{silent:a,signal:i}=s;a?X(!0):y(!0),g("");try{if(!m.currentUser){console.log("🔐 No authenticated user found"),i?.aborted||(h([]),S([]),k([]));return}console.log("📡 Fetching subscriptions and bookings for user:",m.currentUser.email);const l=await L();console.log("📋 Raw subscriptions from API:",l),i?.aborted||k(l);const t=new Set(l.filter(r=>(r.type||"service")==="service"&&r.serviceId!=null).map(r=>String(r.serviceId)));console.log("🔍 Service IDs from subscriptions:",Array.from(t));const n=await I(t);console.log("✅ Matched services:",n.length,n.map(r=>({id:r.id,title:r.title})));let u=[];try{const{data:r}=await d.get("/api/subscriptions/bookings/mine",{suppressToast:!0,suppressErrorLog:!0});Array.isArray(r?.bookings)&&(u=r.bookings.map(c=>({id:c.id||"",serviceId:String(c.serviceId||""),serviceTitle:c.serviceTitle||"Unknown Service",vendorName:c.vendorName||c.vendor||"",scheduledDate:c.scheduledDate||"",scheduledSlot:c.scheduledSlot||"",status:c.status||"scheduled",price:Number(c.price||0),bookedAt:c.bookedAt||c.createdAt||"",imageUrl:c.imageUrl||""})),console.log("📅 Fetched bookings:",u.length))}catch(r){console.warn("⚠️ Failed to fetch bookings:",r)}i?.aborted||(h(n),S(u))}catch(l){console.error("❌ Failed to load data:",l),i?.aborted||g(l?.message||"Failed to load subscriptions")}finally{i?.aborted||(a?X(!1):y(!1))}},[I]);o.useEffect(()=>{const s=new AbortController;return A({silent:!1,signal:s.signal}),()=>{s.abort()}},[A,w]);async function U(s){const a=String(s);console.log("🔄 Starting unsubscribe process for service:",a),console.log("🔄 Current user:",m.currentUser?.email),console.log("🔄 Current tenant:",w),j(i=>({...i,[a]:!0}));try{console.log("🔍 Fetching current subscriptions before unsubscribe...");const i=await L();console.log("📋 Current subscriptions:",i);const l=i.find(t=>String(t.serviceId)===a);if(console.log("🎯 Target subscription to cancel:",l),!l){console.log("⚠️ No subscription found in cache for service:",a),h(t=>t.filter(n=>String(n.id)!==a)),alert(`✅ Service ${a} removed from your subscriptions (was already cancelled)`);return}console.log("📡 Calling unsubscribeFromService API...");try{const t=await z(a);console.log("✅ Unsubscribe API success:",t),alert(`✅ Successfully unsubscribed from service ${a}`)}catch(t){if(t?.response?.status===404)console.log("⚠️ Backend says subscription not found (404) - treating as already cancelled"),alert(`✅ Service ${a} removed from your subscriptions (was already cancelled on server)`);else throw t}h(t=>{const n=t.filter(u=>String(u.id)!==a);return console.log("📝 Updated items count:",n.length),n}),console.log("�️ Clearing subscription from local cache...");try{const t=`sl_subscriptions_cache_v1:${m.currentUser?.uid||m.currentUser?.email}`,n=localStorage.getItem(t);if(n){const r=JSON.parse(n).filter(c=>String(c.serviceId)!==a);localStorage.setItem(t,JSON.stringify(r)),console.log("🗑️ Removed subscription from cache, remaining:",r.length)}}catch(t){console.log("⚠️ Failed to update cache:",t)}console.log("✅ Unsubscribe completed - skipping refresh to prevent reappearing")}catch(i){console.error("❌ Failed to unsubscribe:",i),console.error("❌ Error response:",i?.response),console.error("❌ Error data:",i?.response?.data),console.error("❌ Error status:",i?.response?.status);const l=i?.response?.data?.message||i?.message||"Failed to unsubscribe";alert(`❌ Unsubscribe failed for service ${a}: ${l}`)}finally{j(i=>({...i,[a]:!1})),console.log("🏁 Unsubscribe process completed for service:",a)}}const M=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}catch{return s}},F=s=>{if(!s)return"";const[a]=s.split(":"),i=parseInt(a,10),l=i>=12?"PM":"AM";return`${i>12?i-12:i===0?12:i}:00 ${l}`},R=(s="scheduled")=>{switch(s.toLowerCase()){case"completed":return"bg-success-600";case"scheduled":return"bg-primary-600";case"canceled":case"cancelled":return"bg-danger-600";default:return"bg-secondary-600"}};return e.jsxDEV(T,{children:[e.jsxDEV(_,{title:"My Subscriptions & Bookings"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:347,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"card-header border-bottom py-16 px-24",children:e.jsxDEV("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[e.jsxDEV("div",{className:"d-flex gap-2",children:[e.jsxDEV("button",{type:"button",className:`btn btn-sm ${p==="subscriptions"?"btn-primary-600":"btn-outline-primary"}`,onClick:()=>D("subscriptions"),children:[e.jsxDEV("i",{className:"ri-shopping-cart-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:358,columnNumber:17},this),"Subscriptions (",f.length,")"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:353,columnNumber:15},this),e.jsxDEV("button",{type:"button",className:`btn btn-sm ${p==="bookings"?"btn-primary-600":"btn-outline-primary"}`,onClick:()=>D("bookings"),children:[e.jsxDEV("i",{className:"ri-calendar-check-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:366,columnNumber:17},this),"Bookings (",N.length,")"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:361,columnNumber:15},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:352,columnNumber:13},this),e.jsxDEV("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>A({silent:!0}),disabled:v||V,children:V?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:378,columnNumber:19},this),"Refreshing…"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:377,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("i",{className:"ri-refresh-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:383,columnNumber:19},this),"Refresh"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:382,columnNumber:17},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:370,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:351,columnNumber:11},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:350,columnNumber:9},this),e.jsxDEV("div",{className:"card-body",children:[E&&e.jsxDEV("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsxDEV("i",{className:"ri-error-warning-line me-2"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:393,columnNumber:13},this),E,e.jsxDEV("button",{type:"button",className:"btn-close",onClick:()=>g(""),"aria-label":"Close"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:392,columnNumber:19},this),v?e.jsxDEV("div",{className:"text-center py-5",children:[e.jsxDEV("div",{className:"spinner-border text-primary-600",role:"status",children:e.jsxDEV("span",{className:"visually-hidden",children:"Loading..."},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:401,columnNumber:17},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:400,columnNumber:15},this),e.jsxDEV("p",{className:"text-secondary mt-3",children:["Loading your ",p,"..."]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:403,columnNumber:15},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:399,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[p==="subscriptions"&&e.jsxDEV("div",{className:"row g-3",children:[f.length===0&&e.jsxDEV("div",{className:"col-12 text-center py-5",children:[e.jsxDEV("i",{className:"ri-shopping-cart-line display-4 text-secondary mb-3"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:412,columnNumber:23},this),e.jsxDEV("h5",{className:"text-secondary",children:"No active subscriptions"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:413,columnNumber:23},this),e.jsxDEV("p",{className:"text-muted",children:"Browse the marketplace to subscribe to services"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:414,columnNumber:23},this),e.jsxDEV("a",{href:"/dashboard",className:"btn btn-primary-600 mt-2",children:[e.jsxDEV("i",{className:"ri-store-2-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:416,columnNumber:25},this),"Browse Marketplace"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:415,columnNumber:23},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:411,columnNumber:21},this),f.map(s=>{const a=B.find(l=>String(l.serviceId)===String(s.id)),i=a?.scheduledDate&&a?.scheduledSlot;return e.jsxDEV("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxDEV("div",{className:"card h-100 shadow-sm hover-shadow",children:[s.imageUrl&&e.jsxDEV("img",{src:s.imageUrl,className:"card-img-top",alt:s.title||"Listing",style:{height:180,objectFit:"cover"}},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:429,columnNumber:29},this),e.jsxDEV("div",{className:"card-body d-flex flex-column",children:[e.jsxDEV("h6",{className:"card-title mb-2",children:s.title||"Listing"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:437,columnNumber:29},this),e.jsxDEV("div",{className:"text-muted small mb-2",children:[e.jsxDEV("i",{className:"ri-building-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:439,columnNumber:31},this),s.vendor||"Unknown Vendor"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:438,columnNumber:29},this),e.jsxDEV("div",{className:"text-muted small mb-2",children:[e.jsxDEV("i",{className:"ri-price-tag-3-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:443,columnNumber:31},this),s.category||"General"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:442,columnNumber:29},this),s.description&&e.jsxDEV("p",{className:"flex-grow-1 text-secondary small mb-3",children:[s.description.slice(0,120),s.description.length>120?"…":""]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:447,columnNumber:31},this),i&&e.jsxDEV("div",{className:"alert alert-info alert-sm p-2 mb-3",children:[e.jsxDEV("i",{className:"ri-calendar-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:453,columnNumber:33},this),e.jsxDEV("small",{children:[e.jsxDEV("strong",{children:"Next Session:"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:455,columnNumber:35},this),e.jsxDEV("br",{},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:455,columnNumber:65},this),M(a.scheduledDate)," at ",F(a.scheduledSlot)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:454,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:452,columnNumber:31},this),e.jsxDEV("div",{className:"d-flex justify-content-between align-items-center mt-auto pt-2 border-top",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{className:"text-primary-600",children:["R ",Number(s.price||0).toLocaleString()]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:462,columnNumber:33},this),s.rating&&e.jsxDEV("div",{className:"small text-muted",children:[e.jsxDEV("i",{className:"ri-star-fill text-warning"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:465,columnNumber:37},this),Number(s.rating).toFixed(1)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:464,columnNumber:35},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:461,columnNumber:31},this),e.jsxDEV("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>U(s.id),disabled:!!x[String(s.id)],children:x[String(s.id)]?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"spinner-border spinner-border-sm me-1",role:"status"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:477,columnNumber:37},this),"Removing…"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:476,columnNumber:35},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("i",{className:"ri-close-circle-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:482,columnNumber:37},this),"Unsubscribe"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:481,columnNumber:35},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:470,columnNumber:31},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:460,columnNumber:29},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:436,columnNumber:27},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:427,columnNumber:25},this)},String(s.id),!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:426,columnNumber:23},this)})]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:409,columnNumber:17},this),p==="bookings"&&e.jsxDEV("div",{className:"row g-3",children:[N.length===0&&e.jsxDEV("div",{className:"col-12 text-center py-5",children:[e.jsxDEV("i",{className:"ri-calendar-check-line display-4 text-secondary mb-3"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:501,columnNumber:23},this),e.jsxDEV("h5",{className:"text-secondary",children:"No bookings found"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:502,columnNumber:23},this),e.jsxDEV("p",{className:"text-muted",children:"Book service sessions to see them here"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:503,columnNumber:23},this),e.jsxDEV("a",{href:"/dashboard",className:"btn btn-primary-600 mt-2",children:[e.jsxDEV("i",{className:"ri-calendar-event-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:505,columnNumber:25},this),"Book a Session"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:504,columnNumber:23},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:500,columnNumber:21},this),N.map(s=>e.jsxDEV("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxDEV("div",{className:"card h-100 shadow-sm hover-shadow",children:e.jsxDEV("div",{className:"card-body",children:[e.jsxDEV("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[e.jsxDEV("h6",{className:"card-title mb-0",children:s.serviceTitle},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:515,columnNumber:29},this),e.jsxDEV("span",{className:`badge ${R(s.status)}`,children:s.status||"Scheduled"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:516,columnNumber:29},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:514,columnNumber:27},this),s.vendorName&&e.jsxDEV("div",{className:"text-muted small mb-2",children:[e.jsxDEV("i",{className:"ri-building-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:523,columnNumber:31},this),s.vendorName]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:522,columnNumber:29},this),s.scheduledDate&&e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("div",{className:"d-flex align-items-center text-primary-600 mb-1",children:[e.jsxDEV("i",{className:"ri-calendar-event-fill me-2"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:531,columnNumber:33},this),e.jsxDEV("strong",{children:M(s.scheduledDate)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:532,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:530,columnNumber:31},this),s.scheduledSlot&&e.jsxDEV("div",{className:"d-flex align-items-center text-muted ms-4",children:[e.jsxDEV("i",{className:"ri-time-line me-2"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:536,columnNumber:35},this),F(s.scheduledSlot)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:535,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:529,columnNumber:29},this),s.price&&s.price>0&&e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("i",{className:"ri-money-dollar-circle-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:545,columnNumber:31},this),e.jsxDEV("strong",{children:["R ",Number(s.price||0).toLocaleString()]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:546,columnNumber:31},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:544,columnNumber:29},this),s.bookedAt&&e.jsxDEV("div",{className:"text-muted small",children:[e.jsxDEV("i",{className:"ri-calendar-check-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:552,columnNumber:31},this),"Booked on ",M(s.bookedAt)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:551,columnNumber:29},this),e.jsxDEV("div",{className:"mt-3 pt-3 border-top",children:e.jsxDEV("div",{className:"d-flex gap-2",children:[e.jsxDEV("button",{className:"btn btn-sm btn-outline-primary flex-grow-1",onClick:()=>window.location.href=`/marketplace-details?id=${s.serviceId}`,children:[e.jsxDEV("i",{className:"ri-eye-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:563,columnNumber:33},this),"View Service"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:559,columnNumber:31},this),s.status?.toLowerCase()==="scheduled"&&e.jsxDEV("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>U(s.serviceId),disabled:!!x[s.serviceId],title:"Cancel booking",children:e.jsxDEV("i",{className:"ri-close-line"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:573,columnNumber:35},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:567,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:558,columnNumber:29},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:557,columnNumber:27},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:513,columnNumber:25},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:512,columnNumber:23},this)},s.id,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:511,columnNumber:21},this))]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:498,columnNumber:17},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:406,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:391,columnNumber:9},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:349,columnNumber:7},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:346,columnNumber:5},this)}export{Z as default};
