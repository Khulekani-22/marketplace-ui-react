import{r as d,b as D,c,C as pe,j as a,w as ge}from"./index-CmOqa4Kr.js";import{M as Oe}from"./MasterLayout-w0NEjqQ2.js";import{B as _e}from"./Breadcrumb-DGCwdBIn.js";import"./iconify-Bjpih9DI.js";function ze(){var he;const[w,S]=d.useState([]),[B,z]=d.useState(!1),[q,be]=d.useState(""),[Q,fe]=d.useState(""),[G,m]=d.useState(""),[H,g]=d.useState(""),[W,K]=d.useState([{id:"vendor",name:"Vendor"}]),$=(((he=D.currentUser)==null?void 0:he.email)||sessionStorage.getItem("userEmail")||"").toLowerCase(),[A,J]=d.useState({}),[ye,xe]=d.useState({}),[ve,je]=d.useState({}),[h,we]=d.useState({}),[X,Y]=d.useState({}),[Z,ee]=d.useState({}),[E,Se]=d.useState(""),[I,ae]=d.useState([]),[f,te]=d.useState(!1),[se,L]=d.useState(""),[v,ne]=d.useState(""),[F,Ie]=d.useState(100),[V,Ne]=d.useState({}),[P,ie]=d.useState(!0),[M,re]=d.useState(!1),[O,le]=d.useState(!1),oe=d.useRef(!1),de=d.useMemo(()=>[...w].sort((e,n)=>(e.email||"").localeCompare(n.email||"")),[w]),[_,Ce]=d.useState(""),[R,Ue]=d.useState("All"),ce=d.useMemo(()=>{const e=_.trim().toLowerCase();return de.filter(n=>R!=="All"&&(n.role||"member")!==R?!1:e?`${n.email} ${n.tenantId} ${n.role}`.toLowerCase().includes(e):!0)},[de,_,R]);function me(e){return(Array.isArray(e)?e:[]).map(s=>({email:(s.email||"").toLowerCase(),tenantId:s.tenantId==="vendor"?"public":s.tenantId||"public",role:s.role||"member"}))}async function C(){var e,n;z(!0),m("");try{const{data:s}=await c.get("/api/users"),i=Array.isArray(s)?s:[];S(i.map(t=>({email:(t.email||"").toLowerCase(),tenantId:!t.tenantId||t.tenantId==="public"?"vendor":t.tenantId,role:t.role||"member"})));try{const t=await c.get("/api/data/vendors").then(o=>o.data||[]),r={},l={},u={};t.forEach(o=>{const b=(o.contactEmail||o.email||"").toLowerCase(),x=o.ownerUid||"",y=String(o.id||""),p=String(o.vendorId||"");b&&(r[b]=o),x&&(l[x]=o),y&&(u[y]=o),p&&(u[p]=o)}),J(r),xe(l),je(u)}catch{}}catch(s){m(((n=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:n.message)||(s==null?void 0:s.message)||"Failed to load users")}finally{z(!1)}}d.useEffect(()=>{C()},[]),d.useEffect(()=>{(async()=>{try{if(!$)return;await c.get("/api/users/lookup",{params:{email:$}}),ie(!0)}catch{ie(!1)}})()},[]),d.useEffect(()=>{(async()=>{try{const{data:e}=await c.get("/api/tenants"),n=Array.isArray(e)?e:[],s=[{id:"vendor",name:"Vendor"},...n.map(t=>typeof t=="string"?{id:t,name:t}:{id:t==null?void 0:t.id,name:(t==null?void 0:t.name)||(t==null?void 0:t.id)}).map(t=>t.id==="public"?{...t,id:"vendor",name:t.name||"Vendor"}:t)].filter(t=>t&&t.id),i=new Map;s.forEach(t=>i.set(t.id,t)),K(Array.from(i.values()))}catch{K([{id:"vendor",name:"Vendor"}])}})()},[]);async function ke(e){var i,t,r;e.preventDefault(),m(""),g("");const n=q.trim(),s=Q.trim();if(!n||!s){m("Email and new tenant id are required");return}try{await c.post("/api/users/upgrade",{email:n,newTenantId:s}),g("Upgraded successfully");const l=(window==null?void 0:window.localStorage)&&window.localStorage.getItem("userEmail")||((i=window==null?void 0:window.sessionStorage)==null?void 0:i.getItem("userEmail"));l&&l.toLowerCase()===n.toLowerCase()&&(sessionStorage.setItem("tenantId",s),sessionStorage.setItem("role","admin")),await C()}catch(l){m(((r=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:r.message)||(l==null?void 0:l.message)||"Upgrade failed")}}async function T({email:e,tenantId:n,role:s}){const i=n==="vendor"?"public":n;await c.post("/api/users",{email:e,tenantId:i,role:s}),e.toLowerCase()===$&&(sessionStorage.setItem("tenantId",n),sessionStorage.setItem("role",s))}async function Ae(e){var s,i;m(""),g("");const n=e.role==="admin"?"member":"admin";try{await T({email:e.email,tenantId:e.tenantId||"vendor",role:n}),S(t=>t.map(r=>r.email===e.email?{...r,role:n}:r)),g(`${e.email} is now ${n}`)}catch(t){m(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Failed to update role")}}async function Ee(e,n){var s,i;m(""),g("");try{await T({email:e.email,tenantId:n,role:e.role||"member"}),S(t=>t.map(r=>r.email===e.email?{...r,tenantId:n}:r)),g(`${e.email} moved to ${n}`)}catch(t){m(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Failed to change tenant")}}async function Le(e){var s,i;m(""),g("");const n=(e.email||"").toLowerCase();if(n&&window.confirm(`Delete user ${n}? This removes their account and role mapping but keeps listings.`))try{await c.delete("/api/users",{data:{email:n}}),S(t=>t.filter(r=>(r.email||"").toLowerCase()!==n)),g(`Deleted ${n}`)}catch(t){m(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Failed to delete user")}}async function Fe(e){var n,s;m(""),g("");try{let i="";try{const{data:l}=await c.get("/api/users/lookup",{params:{email:e.email}});i=(l==null?void 0:l.uid)||""}catch{i=""}const t=(e.email||"").split("@")[0]||"Vendor",r={id:i||void 0,name:t,contactEmail:e.email,ownerUid:i||void 0,status:"pending",kycStatus:"pending",categories:[],tags:[]};await c.post("/api/data/vendors",r),J(l=>({...l,[e.email]:!0})),g(`Created vendor profile for ${e.email}`)}catch(i){m(((s=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:s.message)||(i==null?void 0:i.message)||"Failed to create vendor profile")}}async function Re(e,n={}){var i,t;const s=(e.email||"").toLowerCase();ee(r=>({...r,[s]:!0})),m(""),g("");try{let r="";try{const{data:o}=await c.get("/api/users/lookup",{params:{email:s}});r=(o==null?void 0:o.uid)||""}catch{m("Could not find Firebase UID for this email");return}await c.post("/api/users",{email:s,tenantId:e.tenantId||"vendor",role:e.role||"member",uid:r});let l=!1;const u=A[s];if(u){const o=String(u.id||u.vendorId||"");if(o)try{await c.put(`/api/data/vendors/${encodeURIComponent(o)}`,{ownerUid:r}),l=!0}catch{}}else try{const o=await c.get("/api/tenants"),x=(Array.isArray(o.data)?o.data:[]).map(p=>typeof p=="string"?p:p==null?void 0:p.id).filter(Boolean),y=Array.from(new Set(["vendor",...x]));for(const p of y)try{const{data:U}=await c.get("/api/data/vendors",{headers:{"x-tenant-id":p}}),N=Array.isArray(U)?U.find(k=>(k.contactEmail||k.email||"").toLowerCase()===s):null;if(N){const k=String(N.id||N.vendorId||"");if(k){await c.put(`/api/data/vendors/${encodeURIComponent(k)}`,{ownerUid:r},{headers:{"x-tenant-id":p}}),l=!0;break}}}catch{}}catch{}if(!l){const o=s.split("@")[0]||"Vendor";try{await c.post("/api/data/vendors",{name:o,contactEmail:s,ownerUid:r,status:"pending",kycStatus:"pending",categories:[]})}catch{}}n.doRefresh!==!1&&await C(),g(`Synced Firebase UID for ${s}`)}catch(r){m(((t=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:t.message)||(r==null?void 0:r.message)||"Failed to sync UID")}finally{ee(r=>({...r,[s]:!1}))}}function Te(e){const n={},s={},i={};return(e||[]).forEach(t=>{const r=(t.contactEmail||t.email||"").toLowerCase(),l=t.ownerUid||"",u=String(t.id||""),o=String(t.vendorId||"");r&&(n[r]=t),l&&(s[l]=t),u&&(i[u]=t),o&&(i[o]=t)}),{byEmail:n,byOwner:s,byId:i}}async function De(e){const n=(e.email||"").toLowerCase();Y(s=>({...s,[n]:!0}));try{let s=A[n]||null,i="",t=null,r=null;try{const{data:l}=await c.get("/api/users/lookup",{params:{email:n}});i=(l==null?void 0:l.uid)||""}catch{}if(i&&(t=ye[i]||null,r=ve[i]||null),!s&&!t&&!r)try{const l=await c.get("/api/tenants"),o=(Array.isArray(l.data)?l.data:[]).map(p=>typeof p=="string"?p:p==null?void 0:p.id).filter(Boolean),b=[],x=Array.from(new Set(["vendor",...o]));for(const p of x)try{const{data:U}=await c.get("/api/data/vendors",{headers:{"x-tenant-id":p}});Array.isArray(U)&&b.push(...U.map(N=>({...N,_tenantId:N.tenantId||p})))}catch{}const y=Te(b);s=y.byEmail[n]||null,i&&(t=y.byOwner[i]||t,r=y.byId[i]||r)}catch{}we(l=>({...l,[n]:{uid:i,viaEmail:s,viaUid:t,viaId:r}}))}finally{Y(s=>({...s,[n]:!1}))}}const j=d.useCallback(async(e=!0)=>{var n,s,i,t,r;L(""),te(!0);try{const l={search:E,pageSize:F};!e&&v&&(l.pageToken=v);const{data:u}=await c.get("/api/users/all",{params:l}),o=Array.isArray(u==null?void 0:u.items)?u.items:[];ae(b=>e?o:[...b,...o]),ne((u==null?void 0:u.nextPageToken)||"")}catch(l){const u=(n=l==null?void 0:l.response)==null?void 0:n.status;if(u===401||u===403)try{await pe();const o={search:E,pageSize:F};!e&&v&&(o.pageToken=v);const{data:b}=await c.get("/api/users/all",{params:o}),x=Array.isArray(b==null?void 0:b.items)?b.items:[];ae(y=>e?x:[...y,...x]),ne((b==null?void 0:b.nextPageToken)||""),L("");return}catch(o){L(((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||(o==null?void 0:o.message)||"Failed to search platform users")}else L(((r=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:r.message)||(l==null?void 0:l.message)||"Failed to search platform users")}finally{te(!1)}},[E,F,v]),ue=d.useRef(!1);d.useEffect(()=>{if(ue.current)return;ue.current=!0;let e=!0;return(async()=>{try{if(await pe(),!e)return;await j(!0)}catch{}})(),()=>{e=!1}},[j]),d.useEffect(()=>{if(!oe.current&&!f&&Array.isArray(I)&&I.length===0){const e=setTimeout(()=>{oe.current=!0,j(!0)},800);return()=>clearTimeout(e)}},[f,I,j]);async function Be(e){var s,i;const n=V[e]||"vendor";try{await T({email:e,tenantId:n,role:"admin"}),S(t=>t.find(l=>l.email===e)?t.map(l=>l.email===e?{...l,role:"admin",tenantId:n}:l):[...t,{email:e,role:"admin",tenantId:n}]),g(`${e} granted admin (${n})`)}catch(t){m(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Failed to grant admin")}}function $e(e){const n=(e||"").toLowerCase();return w.some(s=>s.email===n&&(s.role||"member")==="admin")}async function Ve(e){var i,t;const n=w.find(r=>r.email===(e||"").toLowerCase()),s=(n==null?void 0:n.tenantId)||V[e]||"vendor";try{await T({email:e,tenantId:s,role:"member"}),S(r=>r.map(l=>l.email===e?{...l,role:"member"}:l)),g(`${e} admin revoked`)}catch(r){m(((t=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:t.message)||(r==null?void 0:r.message)||"Failed to revoke admin")}}async function Pe(){var e,n,s;m(""),g(""),re(!0);try{const i=await c.get("/api/lms/live").then(l=>l.data||{}),t=me(w),r={...i,users:t};await c.put("/api/users/bulk",{users:t}),await c.put("/api/lms/publish",{data:r});try{await ge({action:"USERS_SAVE_ALL",userEmail:(e=D.currentUser)==null?void 0:e.email,targetType:"appData",targetId:"users",metadata:{count:t.length}})}catch{}g("All changes saved to appData.json"),await C()}catch(i){m(((s=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:s.message)||(i==null?void 0:i.message)||"Failed to save changes")}finally{re(!1)}}async function Me(){var e,n,s;m(""),g(""),le(!0);try{const i=await c.get("/api/lms/live").then(l=>l.data||{}),t=me(w),r={...i,users:t};await c.put("/api/users/bulk",{users:t}),await c.post("/api/lms/checkpoints",{message:"User Roles checkpoint",data:r});try{await ge({action:"USERS_CHECKPOINT",userEmail:(e=D.currentUser)==null?void 0:e.email,targetType:"appData",targetId:"users",metadata:{count:t.length}})}catch{}g("Checkpoint saved"),await C()}catch(i){m(((s=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:s.message)||(i==null?void 0:i.message)||"Failed to save checkpoint")}finally{le(!1)}}return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"card h-100 p-0 radius-12 overflow-hidden",children:[a.jsx("div",{className:"card-header border-bottom bg-base py-16 px-24 d-flex align-items-center justify-content-between gap-3 flex-wrap",children:a.jsx("h6",{className:"mb-0",children:"Upgrade Public Tenant to Private Admin"})}),a.jsxs("div",{className:"card-body p-24",children:[a.jsxs("form",{onSubmit:ke,className:"row g-3 align-items-end mb-24",children:[a.jsxs("div",{className:"col-sm-5",children:[a.jsx("label",{className:"form-label text-sm",children:"User Email"}),a.jsx("input",{type:"email",className:"form-control",value:q,onChange:e=>be(e.target.value),placeholder:"user@example.com",required:!0})]}),a.jsxs("div",{className:"col-sm-5",children:[a.jsx("label",{className:"form-label text-sm",children:"New Tenant ID (private)"}),a.jsx("input",{type:"text",className:"form-control",value:Q,onChange:e=>fe(e.target.value),placeholder:"acme-inc",required:!0})]}),a.jsx("div",{className:"col-sm-2",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Upgrade"})})]}),G&&a.jsx("div",{className:"alert alert-danger py-8 px-12 mb-16",children:G}),H&&a.jsx("div",{className:"alert alert-success py-8 px-12 mb-16",children:H}),a.jsx("div",{className:"d-flex flex-wrap align-items-end justify-content-between gap-2 mb-3",children:a.jsxs("div",{className:"d-flex align-items-end gap-2 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("label",{className:"form-label text-sm",children:"Search"}),a.jsx("input",{className:"form-control",placeholder:"Filter by email, tenant, role",value:_,onChange:e=>Ce(e.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"form-label text-sm",children:"Role"}),a.jsxs("select",{className:"form-select",value:R,onChange:e=>Ue(e.target.value),children:[a.jsx("option",{children:"All"}),a.jsx("option",{children:"admin"}),a.jsx("option",{children:"member"})]})]}),a.jsxs("div",{className:"align-self-end mb-1 d-flex gap-2",children:[a.jsx("button",{className:"btn btn-outline-secondary",onClick:Me,disabled:O||M,title:"Create a checkpoint containing the current user role assignments",children:O?"Saving…":"Save Checkpoint"}),a.jsx("button",{className:"btn btn-primary",onClick:Pe,disabled:M||O,title:"Publish all user role/tenant mappings to live appData.json",children:M?"Saving…":"Save All Changes"})]})]})}),a.jsx("div",{className:"table-responsive scroll-sm",children:a.jsxs("table",{className:"table bordered-table sm-table mb-0 align-middle",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Email"}),a.jsx("th",{style:{minWidth:160},children:"Tenant"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{style:{minWidth:320},children:"Actions / Trace"})]})}),a.jsxs("tbody",{children:[B&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,children:"Loading…"})}),!B&&ce.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,children:"No users match your filters."})}),!B&&ce.map(e=>{var n;return a.jsxs("tr",{children:[a.jsx("td",{children:e.email}),a.jsx("td",{children:a.jsx("select",{className:"form-select form-select-sm w-auto bg-base border text-secondary-light rounded-pill",value:e.tenantId||"vendor",onChange:s=>Ee(e,s.target.value),title:"Switch tenant",children:W.map(s=>a.jsx("option",{value:s.id,children:s.name||s.id},s.id))})}),a.jsx("td",{children:a.jsx("span",{className:e.role==="admin"?"badge bg-success-focus text-success-700":"badge bg-neutral-200 text-neutral-900",children:e.role||"member"})}),a.jsxs("td",{children:[A[e.email]?a.jsx("span",{className:"badge bg-primary-subtle text-primary-700",children:"Has vendor"}):a.jsx("span",{className:"badge bg-neutral-200 text-neutral-900",children:"No vendor"}),h[e.email]&&a.jsx("div",{className:"small text-secondary mt-1",children:h[e.email].uid?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["uid: ",a.jsx("code",{children:h[e.email].uid})]}),a.jsxs("div",{children:["by email: ",h[e.email].viaEmail?a.jsxs(a.Fragment,{children:[a.jsx("code",{children:String(h[e.email].viaEmail.contactEmail||h[e.email].viaEmail.email||"")})," ","(vendorId: ",a.jsx("code",{children:String(h[e.email].viaEmail.id||h[e.email].viaEmail.vendorId)}),", tenant: ",a.jsx("code",{children:String(h[e.email].viaEmail.tenantId||h[e.email].viaEmail._tenantId||"vendor")}),")"]}):"—"]}),a.jsxs("div",{children:["by ownerUid: ",h[e.email].viaUid?a.jsxs(a.Fragment,{children:[a.jsx("code",{children:String(h[e.email].viaUid.ownerUid||"")})," ","(vendorId: ",a.jsx("code",{children:String(h[e.email].viaUid.id||h[e.email].viaUid.vendorId)}),", tenant: ",a.jsx("code",{children:String(h[e.email].viaUid.tenantId||h[e.email].viaUid._tenantId||"vendor")}),")"]}):"—"]}),a.jsxs("div",{children:["by id==uid: ",h[e.email].viaId?a.jsxs(a.Fragment,{children:[a.jsx("code",{children:String(h[e.email].viaId.id||h[e.email].viaId.vendorId)})," ","(tenant: ",a.jsx("code",{children:String(h[e.email].viaId.tenantId||h[e.email].viaId._tenantId||"vendor")}),")"]}):"—"]})]}):a.jsxs("div",{children:[a.jsx("span",{className:"me-1",children:"uid:"}),a.jsx("span",{className:"text-secondary",children:"—"}),a.jsx("div",{className:"text-secondary small mt-1",children:P?a.jsx(a.Fragment,{children:"UID not linked. Use “Sync UID” to fetch from Firebase."}):a.jsx(a.Fragment,{children:"UID lookup not available on this server."})})]})})]}),a.jsx("td",{children:a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{type:"button",className:e.role==="admin"?"btn btn-outline-danger btn-sm":"btn btn-outline-success btn-sm",onClick:()=>Ae(e),title:e.role==="admin"?"Revoke admin":"Grant admin",children:e.role==="admin"?"Revoke Admin":"Make Admin"}),!A[e.email]&&a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>Fe(e),title:"Create vendor profile for this user",children:"Create Vendor"}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>De(e),disabled:!!X[e.email],title:"Trace vendor status via email, UID, or vendor id",children:X[e.email]?"Tracing…":"Trace"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>Re(e),disabled:!!Z[e.email]||!P,title:P?"Lookup Firebase UID and link it to this user's vendor":"UID lookup is not available on this server",children:Z[e.email]?"Syncing…":"Sync UID"}),a.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>Le(e),title:"Delete user from Firebase and remove role mapping (keeps listings)",disabled:(((n=D.currentUser)==null?void 0:n.email)||"").toLowerCase()===(e.email||"").toLowerCase(),children:"Delete User"})]})})]},e.email)})]})]})}),a.jsxs("div",{className:"mt-24",children:[a.jsx("h6",{className:"mb-2",children:"Onboard Admins"}),a.jsxs("div",{className:"d-flex flex-wrap align-items-end gap-2 mb-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"form-label text-sm",children:"Search users"}),a.jsx("input",{className:"form-control",placeholder:"Search by email or name",value:E,onChange:e=>Se(e.target.value)})]}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:j,disabled:f,children:f?"Searching…":"Search"}),se&&a.jsx("div",{className:"text-danger small",children:se})]}),a.jsxs("div",{className:"table-responsive scroll-sm",children:[a.jsxs("table",{className:"table bordered-table sm-table mb-0 align-middle",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"UID"}),a.jsx("th",{children:"Tenant"}),a.jsx("th",{children:"Action"})]})}),a.jsxs("tbody",{children:[f&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,children:"Loading…"})}),!f&&I.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,children:"No results"})}),!f&&I.map(e=>a.jsxs("tr",{children:[a.jsx("td",{children:e.email}),a.jsx("td",{children:e.displayName||"—"}),a.jsx("td",{children:a.jsx("code",{children:e.uid})}),a.jsx("td",{children:a.jsx("select",{className:"form-select form-select-sm w-auto bg-base border text-secondary-light rounded-pill",value:V[e.email]||"vendor",onChange:n=>Ne(s=>({...s,[e.email]:n.target.value})),children:W.map(n=>a.jsx("option",{value:n.id,children:n.name||n.id},n.id))})}),a.jsx("td",{children:$e(e.email)?a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Ve((e.email||"").toLowerCase()),children:"Revoke Admin"}):a.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>Be((e.email||"").toLowerCase()),children:"Grant Admin"})})]},e.uid))]})]}),a.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-2",children:[a.jsxs("div",{className:"text-secondary small",children:["Showing ",I.length," user(s)"]}),a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("label",{className:"text-sm",children:"Page size"}),a.jsx("select",{className:"form-select form-select-sm w-auto",value:F,onChange:e=>Ie(Number(e.target.value)||100),children:[50,100,200,500,1e3].map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>j(!0),disabled:f,children:"Refresh"}),a.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>j(!1),disabled:f||!v,children:f?"Loading…":v?"Load more":"End"})]})]})]})]})]})]})})}function We(){return a.jsxs(Oe,{children:[a.jsx(_e,{title:"User Role Management"}),a.jsx(ze,{})]})}export{We as default};
