import{j as e,a as u,w as b,b as v}from"./index-Bn5LcKgl.js";import{b as j,u as w,r as o,L as N}from"./vendor-DW3XjTa1.js";import{n as S,f as P,u as k}from"./firebase-BBiW2ZCr.js";import"./utils-B2rxisVD.js";function U(){const h=j(),{search:p}=w(),g=new URLSearchParams(p).get("next")||"/dashboard",[s,x]=o.useState({name:"",email:"",password:"",agree:!1}),[c,m]=o.useState(!1),[d,i]=o.useState("");function l(a,r){x(t=>({...t,[a]:r}))}async function f(a){try{await v.post("/api/users",{email:a,tenantId:"basic",role:"member"})}catch{}}async function y(a){if(a.preventDefault(),i(""),!s.agree){i("Please agree to the Terms and Privacy Policy.");return}m(!0);try{let r;try{r=(await S(u,s.email,s.password)).user}catch(n){if(n?.code==="auth/email-already-in-use")r=(await P(u,s.email,s.password)).user;else throw n}if(s.name)try{await k(r,{displayName:s.name})}catch{}const t=(r.email||s.email).toLowerCase();sessionStorage.setItem("userEmail",t),sessionStorage.setItem("role","member"),sessionStorage.setItem("tenantId","basic"),await f(t);try{await b({action:"STARTUP_SIGNUP",userEmail:t,targetType:"user"})}catch{}h(g,{replace:!0})}catch(r){const t=r?.code||"";i(t==="auth/weak-password"?"Password is too weak (min 8 chars).":r?.message||"Sign up failed")}finally{m(!1)}}return e.jsxs("div",{className:"container py-4",style:{maxWidth:720},children:[e.jsx("h1",{className:"h3 mb-2",children:"Join as a Startup"}),e.jsx("p",{className:"text-secondary",children:"Create an account to access your dashboard. You can upgrade anytime by signing up as a vendor to list services and gain more privileges."}),d&&e.jsx("div",{className:"alert alert-danger",children:d}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Your name or startup name"}),e.jsx("input",{className:"form-control",value:s.name,onChange:a=>l("name",a.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",value:s.email,onChange:a=>l("email",a.target.value),required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",value:s.password,onChange:a=>l("password",a.target.value),required:!0})]}),e.jsx("div",{className:"col-md-6 d-flex align-items-end",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{id:"agree",className:"form-check-input",type:"checkbox",checked:s.agree,onChange:a=>l("agree",a.target.checked)}),e.jsx("label",{htmlFor:"agree",className:"form-check-label ms-2",children:"I agree to the Terms & Privacy"})]})})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx("button",{className:"btn rounded-pill text-primary-50 hover-text-primary-200 bg-primary-500 bg-hover-primary-800 radius-8 px-12 py-6",disabled:c,children:c?"Creatingâ€¦":"Create account"}),e.jsx(N,{to:"/signup/vendor",className:"btn rounded-pill border text-neutral-500 border-neutral-700 radius-8 px-12 py-6 bg-hover-primary-700 text-hover-white",children:"Become a Vendor"})]})]})})})]})}export{U as default};
