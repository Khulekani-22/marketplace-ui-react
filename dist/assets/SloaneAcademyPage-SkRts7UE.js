import{j as e,M as V,I as h}from"./index-Bn5LcKgl.js";import{r as l}from"./vendor-DW3XjTa1.js";import{a as $}from"./appData-CcG0uR8Q.js";import"./firebase-BBiW2ZCr.js";import"./utils-B2rxisVD.js";const E="sloane_academy_progress_v2",k="https://storage.googleapis.com/coverr-main/mp4/Mt_Baker.mp4",b=$;function B(){try{const a=localStorage.getItem(E);if(!a)return new Set;const r=JSON.parse(a);return Array.isArray(r)?new Set(r.filter(u=>typeof u=="string")):new Set}catch{return new Set}}function W(a){try{const r=Array.from(a);localStorage.setItem(E,JSON.stringify(r))}catch{}}function y(a){if(!a)return 0;const r=a.match(/(\d+(?:\.\d+)?)/);return r?Number(r[1]):0}function _(a){if(!a)return"To be announced";const r=new Date(a);return Number.isNaN(r.getTime())?"To be announced":new Intl.DateTimeFormat("en-ZA",{weekday:"short",day:"numeric",month:"short"}).format(r)}function O(a){if(!a)return k;const r=a?.videoUrl||a?.video||null;return typeof r=="string"&&r.startsWith("http")?r:k}function Y(){const a=l.useMemo(()=>Array.isArray(b?.cohorts)?b.cohorts:[],[]),[r,u]=l.useState(B),[v,I]=l.useState(()=>a[0]?.id??""),[d,j]=l.useState(()=>a[0]?.courses?.[0]?.id??""),[A,x]=l.useState(()=>a[0]?.courses?.[0]?.id??"");l.useEffect(()=>W(r),[r]);const p=l.useMemo(()=>a.find(s=>s.id===v)||a[0]||null,[a,v]),i=l.useMemo(()=>Array.isArray(p?.courses)?p.courses:[],[p]);l.useEffect(()=>{if(!i.length){j(""),x("");return}if(!i.some(s=>s.id===d)){const s=i[0]?.id??"";j(s),x(s)}},[i,d]),l.useEffect(()=>{d&&x(d)},[d]);const n=l.useMemo(()=>i.find(s=>s.id===d)||null,[i,d]),o=l.useMemo(()=>{const s=[];return a.forEach(t=>{t?.courses?.forEach(c=>{c?.id&&s.push({course:c,cohort:t})})}),s},[a]),g=o.length,N=l.useMemo(()=>o.filter(s=>r.has(s.course.id)).length,[o,r]),m=g?Math.round(N/g*100):0,C=l.useMemo(()=>o.reduce((s,t)=>s+y(t.course.duration),0),[o]),D=l.useMemo(()=>i.map(s=>{const t=y(s.duration),c=r.has(s.id);return{id:s.id,title:s.title,description:s.description,thumbnail:s.videoThumbnail,minutes:t,completed:c}}),[i,r]),w=l.useMemo(()=>{const s=Array.isArray(b?.events)?b.events:[],t=new Date;return s.filter(c=>{if(!c?.date)return!0;const M=new Date(c.date);return!Number.isNaN(M.getTime())&&M>=t}).slice(0,3)},[]);function S(s){if(s){j(s),x(s);try{document.getElementById("sloane-progress")?.scrollIntoView({behavior:"smooth",block:"start"})}catch{}}}function P(s){s&&u(t=>{const c=new Set(t);return c.add(s),c})}function T(s){u(t=>{const c=new Set(t);return c.delete(s),c})}const f=n?r.has(n.id):!1;return e.jsx(V,{children:e.jsx("div",{className:"container-fluid py-4",children:e.jsxs("div",{className:"row g-24",children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card radius-16 border-0 shadow-sm p-24 bg-base",children:e.jsxs("div",{className:"row g-16 align-items-center",children:[e.jsxs("div",{className:"col-12 col-lg-7",children:[e.jsx("span",{className:"badge bg-primary-100 text-primary-700 mb-12",children:"Sloane Academy"}),e.jsx("h1",{className:"mb-12",children:"Video-led learning journeys for African founders & operators"}),e.jsx("p",{className:"text-secondary-light mb-16",children:"Watch partner-powered modules end-to-end to unlock completion. Switch programmes to explore other academies and keep your knowledge current."}),e.jsxs("div",{className:"d-flex flex-wrap gap-12",children:[e.jsx("button",{type:"button",className:"btn btn-primary-600 px-24",onClick:()=>document.getElementById("sloane-cohort-selector")?.scrollIntoView({behavior:"smooth"}),children:"Browse programmes"}),e.jsx("button",{type:"button",className:"btn btn-outline-primary-600 px-24",onClick:()=>document.getElementById("sloane-progress")?.scrollIntoView({behavior:"smooth"}),children:"View my progress"})]})]}),e.jsx("div",{className:"col-12 col-lg-5",children:e.jsxs("div",{className:"card border-0 radius-16 bg-base p-24 h-100",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-16",children:[e.jsx("h6",{className:"mb-0",children:"Overall progress"}),e.jsxs("span",{className:"badge bg-primary-50 text-primary-700",children:[m,"%"]})]}),e.jsxs("p",{className:"text-secondary-light mb-20",children:["You have completed ",N," of ",g," video modules across partner programmes."]}),e.jsxs("div",{className:"d-flex align-items-center gap-16",children:[e.jsx("div",{className:"progress flex-grow-1",style:{height:12},children:e.jsx("div",{className:"progress-bar bg-primary-600",role:"progressbar",style:{width:`${m}%`},"aria-valuenow":m,"aria-valuemin":0,"aria-valuemax":100})}),e.jsxs("span",{className:"fw-medium text-primary-700",children:[m,"%"]})]}),e.jsxs("div",{className:"mt-20 d-flex flex-wrap gap-16",children:[e.jsxs("div",{className:"d-flex align-items-center gap-8",children:[e.jsx(h,{icon:"mdi:account-group",className:"text-primary-500",width:24,height:24}),e.jsxs("span",{className:"text-secondary-light",children:[a.length," partner tracks"]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-8",children:[e.jsx(h,{icon:"mdi:clock-outline",className:"text-warning-500",width:24,height:24}),e.jsxs("span",{className:"text-secondary-light",children:["~",Math.max(1,Math.round(C/60))," hrs of content"]})]})]})]})})]})})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row g-16",children:[e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Programmes"}),e.jsx("h3",{className:"mt-12 mb-0",children:a.length})]})}),e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Modules"}),e.jsx("h3",{className:"mt-12 mb-0",children:g})]})}),e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Completed"}),e.jsx("h3",{className:"mt-12 mb-0",children:N})]})}),e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Completion"}),e.jsxs("h3",{className:"mt-12 mb-0",children:[m,"%"]})]})})]})}),e.jsx("div",{className:"col-12",id:"sloane-cohort-selector",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base",children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-12 mb-20",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4",children:"Partner programmes"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Switch academies to watch partner videos and track completion."})]}),e.jsx("div",{children:e.jsx("select",{className:"form-select btn btn-outline-primary-600 border rounded-pill px-24",value:p?.id??"",onChange:s=>I(s.target.value),"aria-label":"Select partner programme",children:a.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})})]}),i.length?e.jsx("div",{className:"accordion",id:"module-accordion",role:"tablist",children:D.map(s=>{const t=A===s.id;return e.jsxs("div",{className:"accordion-item border radius-12 mb-12 bg-base",children:[e.jsx("h2",{className:"accordion-header",id:`module-head-${s.id}`,children:e.jsxs("button",{type:"button",className:`accordion-button d-flex gap-16 align-items-center ${t?"":"collapsed"}`,onClick:()=>S(s.id),"aria-expanded":t,"aria-controls":`module-panel-${s.id}`,children:[s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:"",className:"rounded",style:{width:80,height:56,objectFit:"cover"}}):e.jsx("div",{className:"rounded bg-neutral-100 d-flex align-items-center justify-content-center",style:{width:80,height:56},children:e.jsx(h,{icon:"mdi:play-circle-outline",width:28,height:28,className:"text-primary-500"})}),e.jsxs("div",{className:"flex-grow-1 text-start",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-12",children:[e.jsx("span",{className:"fw-medium",children:s.title}),e.jsx("span",{className:`badge ${s.completed?"bg-success-100 text-success-700":"bg-neutral-100 text-neutral-700"}`,children:s.completed?"Completed":"Pending"})]}),e.jsxs("small",{className:"text-secondary-light",children:[s.minutes||30," min video"]})]})]})}),e.jsx("div",{id:`module-panel-${s.id}`,className:`accordion-collapse collapse ${t?"show":""}`,"aria-labelledby":`module-head-${s.id}`,"data-bs-parent":"#module-accordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsx("p",{className:"text-secondary-light mb-12",children:s.description||"This module description will be added soon."}),e.jsxs("div",{className:"d-flex flex-wrap gap-12 text-secondary-light",children:[e.jsxs("span",{className:"d-flex align-items-center gap-8",children:[e.jsx(h,{icon:"mdi:clock-outline",width:18,height:18})," ",s.minutes||30," min"]}),e.jsxs("span",{className:"d-flex align-items-center gap-8",children:[e.jsx(h,{icon:s.completed?"mdi:check-circle":"mdi:checkbox-blank-circle-outline",width:18,height:18,className:s.completed?"text-success-500":"text-neutral-400"}),s.completed?"Watched":"Not watched yet"]})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary-600 mt-16",onClick:()=>S(s.id),children:"Watch module"})]})})]},s.id)})}):e.jsx("div",{className:"alert alert-warning mb-0",children:"This programme does not have any modules yet."})]})}),e.jsx("div",{className:"col-12",id:"sloane-progress",children:e.jsxs("div",{className:"row g-24",children:[e.jsx("div",{className:"col-12 col-xl-8",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base h-100",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-20",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4",children:n?.title||"Module detail"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Watch the full video to automatically mark the module as complete."})]}),n&&f&&e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary-600",onClick:()=>T(n.id),children:"Reset module"})]}),n?e.jsxs("div",{className:"d-flex flex-column gap-16",children:[e.jsx("div",{className:"ratio ratio-16x9 radius-16 overflow-hidden bg-neutral-100",children:e.jsxs("video",{controls:!0,poster:n.videoThumbnail,onEnded:()=>P(n.id),style:{width:"100%",height:"100%",objectFit:"cover"},children:[e.jsx("source",{src:O(n),type:"video/mp4"}),"Your browser does not support embedded videos."]},n.id)}),e.jsxs("div",{className:"d-flex flex-wrap gap-12 align-items-center",children:[e.jsx("span",{className:`badge ${f?"bg-success-100 text-success-700":"bg-warning-100 text-warning-700"}`,children:f?"Completed":"Watch to complete"}),e.jsxs("span",{className:"text-secondary-light",children:["Duration · ",y(n.duration)||30," min"]})]}),e.jsx("p",{className:"text-secondary-light mb-0",children:n.description})]}):e.jsx("div",{className:"alert alert-warning mb-0",children:"Select a module to start watching."})]})}),e.jsx("div",{className:"col-12 col-xl-4",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base",children:[e.jsx("h5",{className:"mb-12",children:"Upcoming experiences"}),w.length?e.jsx("ul",{className:"list-unstyled mb-0 d-flex flex-column gap-16",children:w.map(s=>e.jsxs("li",{className:"border radius-12 p-16",children:[e.jsxs("div",{className:"d-flex align-items-center gap-12 mb-8",children:[e.jsx("span",{className:"badge bg-primary-50 text-primary-700",children:s.type||"Learning"}),e.jsxs("span",{className:"text-secondary-light",children:[_(s.date)," · ",s.time||"TBA"]})]}),e.jsx("h6",{className:"mb-4",children:s.title}),e.jsx("p",{className:"text-secondary-light mb-8",children:s.host}),e.jsx("p",{className:"text-secondary-light mb-0",children:s.location||"Virtual"})]},s.id))}):e.jsx("p",{className:"text-secondary-light mb-0",children:"No upcoming events yet. Keep an eye on the partner bulletin."})]})})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card radius-16 p-24 border-0 bg-base",children:e.jsxs("div",{className:"row g-16 align-items-center",children:[e.jsxs("div",{className:"col-12 col-md-8",children:[e.jsx("h5",{className:"mb-8",children:"Need a facilitator or learning support?"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Share feedback with the Sloane Academy team for coaching requests, facilitator sessions, or to unlock partner resources."})]}),e.jsx("div",{className:"col-12 col-md-4 text-md-end",children:e.jsx("a",{className:"btn btn-outline-primary-600",href:"mailto:academy@22onsloane.co",children:"Email the academy team"})})]})})})]})})})}export{Y as default};
