import{e as Ve,r as m,n as De,h as ne,d as Pe,a as Fe,c as fe,j as e,L as ye,b as ie}from"./index-CX7MG6wl.js";import{u as ze,M as qe}from"./MasterLayout-DszbZFWp.js";import{B as Be}from"./Breadcrumb-B1ZkEPBL.js";import{I as N}from"./iconify-ByVlBtJi.js";import{f as Oe}from"./listings-Dsxps7Cn.js";function Ke(b){const x=b.toString().toLowerCase();return x==="vendor"?"public":x}function Ue(b,x){const J=Ke(b),D=(x||"").trim().toLowerCase();return D?`vendor_pending_listings:${J}:${D}`:null}function H(b){return String((b==null?void 0:b.id)||(b==null?void 0:b.serviceId)||(b==null?void 0:b.listingId)||"")}function We(b){try{const x=typeof b=="string"?JSON.parse(b):b;return Array.isArray(x)?x:[]}catch{return[]}}const He=()=>{var xe;const b=ze(),{threads:x=[],unreadCount:J=0,markRead:D=()=>{},refresh:Q=()=>Promise.resolve(),loading:T=!1,refreshing:k=!1,error:P=null,syncMessagesToLive:Y=()=>Promise.resolve(!1)}=b||{},je=Ve(),{vendor:t=null}=je||{},[G,ve]=m.useState(""),[F,re]=m.useState("inbox"),le=De((typeof window<"u"?sessionStorage.getItem("role"):null)||"member"),[p,Ne]=m.useState(()=>{const s=(typeof window<"u"?sessionStorage.getItem("messageViewAs"):null)||"";return s||(ne(le)?t!=null&&t.vendorId?"vendor":"admin":t!=null&&t.vendorId?"vendor":"user")}),[n,f]=m.useState({open:!1,mode:t!=null&&t.vendorId?"vendor_admin":"vendor_subscriber",serviceId:"",subject:"",content:"",sending:!1,err:null,ok:!1,subscriberEmail:""}),[ce,oe]=m.useState([]),[Se,z]=m.useState([]),[o,$]=m.useState({q:"",page:1,pageSize:10,total:0,items:[],loading:!1}),L=(typeof window<"u"?sessionStorage.getItem("tenantId"):null)||"vendor",{appData:q}=Pe(),de=m.useMemo(()=>(L==="vendor"?"public":L).toString().toLowerCase(),[L]),X=m.useMemo(()=>Ue(L,(t==null?void 0:t.vendorId)||(t==null?void 0:t.email)||(t==null?void 0:t.id)||""),[L,t==null?void 0:t.vendorId,t==null?void 0:t.email,t==null?void 0:t.id]),[me,B]=m.useState([]);m.useEffect(()=>{if(!X){B([]);return}if(typeof window>"u"){B([]);return}try{const s=window.localStorage.getItem(X);B(We(s))}catch{B([])}},[X]);const ue=m.useCallback(s=>{const a=Array.isArray(s)?[...s]:[],r=new Set(a.map(d=>H(d)).filter(Boolean));return me.forEach(d=>{const i=H(d);!i||r.has(i)||(r.add(i),a.unshift(d))}),a},[me]),S=(((xe=Fe.currentUser)==null?void 0:xe.email)||sessionStorage.getItem("userEmail")||"").toLowerCase(),ge=le,O=ne(ge)||!!(t!=null&&t.vendorId),Z=(t==null?void 0:t.vendorId)||(t==null?void 0:t.id)||"",K=m.useMemo(()=>{const s=[];return p==="user"?S&&s.push(`user:${S}`):p==="vendor"?(Z&&s.push(`vendor:${String(Z).toLowerCase()}`),S&&s.push(`vendor:${S}`)):p==="admin"&&(s.push("admin"),S&&s.push(`admin:${S}`)),s},[p,S,Z]),be=m.useMemo(()=>x.filter(s=>Array.isArray(s==null?void 0:s.messages)&&s.messages.some(a=>K.includes(String(a.senderId||"").toLowerCase()))),[x,K]),we=m.useMemo(()=>x.filter(s=>Array.isArray(s==null?void 0:s.messages)&&s.messages.some(a=>!K.includes(String(a.senderId||"").toLowerCase()))),[x,K]),Ie=be.length,Ce=we.length,ee=F==="sent"?be:x,he=m.useMemo(()=>{const s=G.trim().toLowerCase();return s?ee.filter(a=>{var i;const r=(a.subject||"").toLowerCase(),d=(((i=a.lastMessage)==null?void 0:i.snippet)||"").toLowerCase();return r.includes(s)||d.includes(s)}):ee},[ee,G]),Le=J===0,ke=async()=>{await Promise.all(x.filter(s=>!s.read).map(s=>D(s.id,!0)))},[R,pe]=m.useState(!1),[_,se]=m.useState(!1),[w,V]=m.useState(""),[I,_e]=m.useState(()=>{try{return localStorage.getItem("sl_messages_last_sync")||""}catch{return""}});console.log("EmailLayer Button Debug:",{loading:T,refreshing:k,syncBusy:R,"full-refresh-disabled":T||k||R,"quick-refresh-disabled":T||k,messagesContext:!!b,contextValues:b});async function Ae(){if(!O){V("Vendor or admin access required to sync."),setTimeout(()=>V(""),2500);return}pe(!0),V(""),se(!1);try{if(!await Y())throw new Error("Sync did not complete");const a=new Date().toISOString();try{localStorage.setItem("sl_messages_last_sync",a)}catch{}_e(a),se(!0),setTimeout(()=>se(!1),1500)}catch(s){V((s==null?void 0:s.message)||"Sync failed"),setTimeout(()=>V(""),2500)}finally{pe(!1)}}async function Me(){try{try{localStorage.removeItem("sl_messages_cache_v1")}catch{}if(await Q({silent:!1,force:!0}),O)try{await Y()}catch(s){console.warn("Sync during full refresh failed:",s)}}catch(s){console.error("Full refresh failed:",s)}}m.useEffect(()=>{try{sessionStorage.setItem("messageViewAs",p)}catch{}f(s=>({...s,mode:p==="vendor"?"vendor_admin":"vendor_subscriber",serviceId:"",subscriberEmail:""}))},[p]);function Ee(){f(s=>({...s,open:!0}))}function U(){f({open:!1,mode:t!=null&&t.vendorId?"vendor_admin":"vendor_subscriber",serviceId:"",subject:"",content:"",sending:!1,err:null,ok:!1})}async function Te(){try{const s=q||fe,a=Array.isArray(s==null?void 0:s.services)?s.services:[];let r=[];try{const{listings:l}=await Oe();r=Array.isArray(l)?l:[]}catch{r=[]}const d=t!=null&&t.vendorId?String(t.vendorId):t!=null&&t.id?String(t.id):"",i=((t==null?void 0:t.email)||(t==null?void 0:t.contactEmail)||"").toLowerCase(),u=a.filter(l=>{const g=String(l.vendorId||""),h=(l.contactEmail||l.email||"").toLowerCase();return d&&g===d||i&&h===i}),y=new Map;[...r,...u].forEach(l=>{const g=H(l);g&&(y.has(g)?y.set(g,{...y.get(g),...l}):y.set(g,l))});const v=ue(Array.from(y.values())).reduce((l,g)=>{const h=H(g);if(!h)return l;const A=(g==null?void 0:g.title)||(g==null?void 0:g.name)||(g==null?void 0:g.listingTitle)||"Untitled listing";return l.push({id:h,title:A}),l},[]);oe(v);try{const g=(await ie.get("/api/subscriptions/my").then(h=>Array.isArray(h.data)?h.data:[])).map(h=>{var A,W;return{...h,title:((A=v.find(c=>String(c.id)===String(h.serviceId)))==null?void 0:A.title)||((W=a.find(c=>String(c.id)===String(h.serviceId)))==null?void 0:W.title)||h.serviceId}});z(g)}catch(l){if((l==null?void 0:l.code)==="ERR_NETWORK"){const h=(L==="vendor"?"public":L).toString().toLowerCase(),c=(Array.isArray(s==null?void 0:s.subscriptions)?s.subscriptions:[]).filter(j=>{const M=((j==null?void 0:j.tenantId)??"public").toString().toLowerCase()===h,E=((j==null?void 0:j.email)||"").toLowerCase();return M&&E===S}).map(j=>{var M,E;return{...j,title:((M=v.find(ae=>String(ae.id)===String(j.serviceId)))==null?void 0:M.title)||((E=a.find(ae=>String(ae.id)===String(j.serviceId)))==null?void 0:E.title)||j.serviceId}});z(c)}else z([])}}catch{oe([]),z([])}}const $e=m.useCallback((s,a="",r=1,d=10)=>{if(!s)return{items:[],total:0};const i=q||fe,u=Array.isArray(i==null?void 0:i.subscriptions)?i.subscriptions:[],y=t!=null&&t.vendorId?String(t.vendorId).toLowerCase():"",C=(a||"").trim().toLowerCase(),v=u.filter(c=>{const j=((c==null?void 0:c.tenantId)??"public").toString().toLowerCase()===de,M=String((c==null?void 0:c.serviceId)||"")===String(s),E=y?String((c==null?void 0:c.vendorId)||"").toLowerCase()===y:!0;return j&&M&&E}),l=C?v.filter(c=>((c==null?void 0:c.email)||"").toLowerCase().includes(C)):v,g=l.length,h=Math.max(0,(Number(r)-1)*Number(d)),A=h+Number(d);return{items:l.slice(h,A).map(c=>({id:c.id||`${c.serviceId}-${c.email}`,email:c.email,tenantId:c.tenantId,serviceId:c.serviceId})),total:g}},[q,de,t]);async function te(s,a=o.q,r=o.page,d=o.pageSize){try{$(l=>({...l,loading:!0}));const{data:i}=await ie.get(`/api/subscriptions/service/${encodeURIComponent(s)}`,{params:{q:a,page:r,pageSize:d}}),u=Number((i==null?void 0:i.page)||r),y=Number((i==null?void 0:i.pageSize)||d),C=Number((i==null?void 0:i.total)||0),v=Array.isArray(i==null?void 0:i.items)?i.items:[];$({q:a,page:u,pageSize:y,total:C,items:v,loading:!1})}catch{const i=$e(s,a,r,d);$(u=>i.total>0?{q:a,page:r,pageSize:d,total:i.total,items:i.items,loading:!1}:{...u,q:a,page:r,pageSize:d,loading:!1})}}m.useEffect(()=>{n.open&&Te()},[n.open,t==null?void 0:t.vendorId,t==null?void 0:t.email,t==null?void 0:t.id,L,ue,q,S]),m.useEffect(()=>{n.open&&n.mode==="vendor_to_subscriber"&&n.serviceId?te(n.serviceId,o.q,1,o.pageSize):$({q:"",page:1,pageSize:10,total:0,items:[],loading:!1})},[n.open,n.mode,n.serviceId]);async function Re(s){var a,r,d,i;if((a=s==null?void 0:s.preventDefault)==null||a.call(s),!(!n.serviceId||!n.content.trim())){f(u=>({...u,sending:!0,err:null,ok:!1}));try{const y={type:n.mode==="vendor_admin"?"vendor_admin":n.mode==="vendor_to_subscriber"?"vendor_to_subscriber":"vendor_subscriber",serviceId:n.serviceId,listingId:n.serviceId,subject:n.subject,content:n.content,subscriberEmail:n.mode==="vendor_to_subscriber"?n.subscriberEmail:void 0};await ie.post("/api/messages/compose",y),f(C=>({...C,sending:!1,ok:!0})),await Q({force:!0});try{await Y()}catch{}setTimeout(()=>U(),1200)}catch(u){const y=(r=u==null?void 0:u.response)==null?void 0:r.status,C=((i=(d=u==null?void 0:u.response)==null?void 0:d.data)==null?void 0:i.message)||(u==null?void 0:u.message)||"Failed to send",v=y===401?" Please sign in to send messages.":"";f(l=>({...l,sending:!1,err:C+v}))}}}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row gy-4",children:[e.jsx("div",{className:"col-xxl-3",children:e.jsx("div",{className:"card h-100 p-0",children:e.jsx("div",{className:"card-body p-24",children:e.jsxs("div",{className:"mt-16",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm w-100 mb-3 d-flex align-items-center gap-2",onClick:Ee,disabled:p==="admin",children:[e.jsx(N,{icon:"fa6-regular:square-plus",className:"icon text-lg line-height-1"}),"Compose"]}),e.jsxs("ul",{children:[e.jsx("li",{className:"item-active mb-4",children:e.jsx("button",{type:"button",onClick:()=>re("inbox"),className:`bg-hover-primary-50 px-12 py-8 w-100 radius-8 text-start ${F==="inbox"?"text-primary-600 fw-semibold":"text-secondary-light"}`,children:e.jsxs("span",{className:"d-flex align-items-center gap-10 justify-content-between w-100",children:[e.jsxs("span",{className:"d-flex align-items-center gap-10",children:[e.jsx("span",{className:"icon text-xxl line-height-1 d-flex",children:e.jsx(N,{icon:"uil:envelope",className:"icon line-height-1"})}),e.jsx("span",{className:"fw-semibold",children:"Message Center"})]}),e.jsx("span",{className:"fw-medium",children:Ce})]})})}),e.jsx("li",{className:"mb-4",children:e.jsx("button",{type:"button",onClick:()=>re("sent"),className:`bg-hover-primary-50 px-12 py-8 w-100 radius-8 text-start ${F==="sent"?"text-primary-600 fw-semibold":"text-secondary-light"}`,children:e.jsxs("span",{className:"d-flex align-items-center gap-10 justify-content-between w-100",children:[e.jsxs("span",{className:"d-flex align-items-center gap-10",children:[e.jsx("span",{className:"icon text-xxl line-height-1 d-flex",children:e.jsx(N,{icon:"ion:paper-plane-outline",className:"icon line-height-1"})}),e.jsx("span",{className:"fw-semibold",children:"Sent"})]}),e.jsx("span",{className:"fw-medium",children:Ie})]})})})]})]})})})}),e.jsx("div",{className:"col-xxl-9",children:e.jsxs("div",{className:"card h-100 p-0 email-card",children:[e.jsxs("div",{className:"card-header border-bottom bg-base py-16 px-24",children:[(_||w||I)&&e.jsx("div",{className:`alert ${_?"alert-success":w?"alert-danger":"alert-info"} py-2 mb-3`,children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(N,{icon:_?"mdi:check-circle":w?"mdi:alert-circle":"mdi:information"}),e.jsxs("span",{children:[_&&"Messages synced successfully",w&&`Sync error: ${w}`,!_&&!w&&I&&`Last sync: ${new Date(I).toLocaleString()}`]})]}),I&&e.jsx("small",{className:"text-muted",children:new Date(I).toLocaleString()})]})}),P&&e.jsx("div",{className:"alert alert-warning py-2 mb-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(N,{icon:"mdi:alert"}),e.jsx("span",{children:P})]})}),e.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-4",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:Me,disabled:T||k||R,title:"Clear cache and reload all messages from backend appData.json",children:[e.jsx(N,{icon:"tabler:reload",className:"me-1"}),k?"Refreshing…":"Full Refresh"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{Q({silent:!0,force:!0})},disabled:T||k,children:[e.jsx(N,{icon:"mdi:refresh",className:"me-1"}),k?"Refreshing…":"Quick Refresh"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:ke,disabled:Le,children:[e.jsx(N,{icon:"gravity-ui:envelope-open",className:"me-1"})," Mark all as read"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Ae,disabled:R||!O,title:O?"Write messages to server appData.json":"Vendor or admin access required",children:[e.jsx(N,{icon:"mdi:cloud-upload-outline",className:"me-1"})," ",R?"Syncing…":"Sync Now"]}),I&&!_&&!w&&e.jsxs("small",{className:"text-muted",children:["Last: ",new Date(I).toLocaleString()]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("label",{className:"form-label mb-0 small text-muted",children:"View as"}),e.jsxs("select",{className:"form-select form-select-sm",value:p,onChange:s=>Ne(s.target.value),children:[e.jsx("option",{value:"user",children:"Startup"}),(t==null?void 0:t.vendorId)&&e.jsx("option",{value:"vendor",children:"Vendor"}),ne(ge)&&e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsxs("form",{className:"navbar-search d-flex",onSubmit:s=>s.preventDefault(),children:[e.jsx("input",{type:"text",className:"bg-base h-40-px w-auto",name:"search",placeholder:"Search",value:G,onChange:s=>ve(s.target.value)}),e.jsx(N,{icon:"ion:search-outline",className:"icon"})]}),e.jsx("div",{className:"small text-muted",children:w?e.jsx("span",{className:"text-danger",children:w}):_?e.jsx("span",{className:"text-success",children:"Synced"}):I?`Last sync: ${new Date(I).toLocaleString()}`:""})]})]})]}),e.jsxs("div",{className:"card-body p-0",children:[P&&e.jsx("div",{className:"alert alert-danger rounded-0 border-bottom mb-0",children:P}),e.jsxs("ul",{className:"overflow-x-auto",children:[he.map(s=>{var a,r,d,i,u;return e.jsxs("li",{className:`email-item px-24 py-16 d-flex gap-4 align-items-center border-bottom cursor-pointer bg-hover-neutral-200 min-w-max-content ${s.read?"":"bg-primary-50"}`,children:[e.jsx(ye,{to:`/view-details?tid=${encodeURIComponent(s.id)}`,className:"text-primary-light fw-medium text-md text-line-1 w-190-px",children:s.subject||"Message"}),e.jsx(ye,{to:`/view-details?tid=${encodeURIComponent(s.id)}`,className:"text-primary-light fw-medium mb-0 text-line-1 max-w-740-px",children:((a=s.lastMessage)==null?void 0:a.snippet)||((i=(d=s.messages)==null?void 0:d[((r=s.messages)==null?void 0:r.length)-1])==null?void 0:i.content)||""}),e.jsx("span",{className:"text-primary-light fw-medium min-w-max-content ms-auto",children:(u=s.lastMessage)!=null&&u.date?new Date(s.lastMessage.date).toLocaleString():""})]},s.id)}),he.length===0&&e.jsx("li",{className:"px-24 py-16 text-muted",children:F==="sent"?"No sent messages for this role; try switching “View as”.":"No messages yet. Try switching “View as” or start a conversation."})]})]})]})})]}),n.open&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{background:"rgba(0,0,0,0.5)",zIndex:1070},onClick:s=>s.target===s.currentTarget&&U(),children:e.jsxs("div",{className:"card",style:{maxWidth:640,margin:"8vh auto"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h6",{className:"mb-0",children:"Compose message"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:U,children:"Close"})]}),e.jsxs("form",{onSubmit:Re,children:[e.jsxs("div",{className:"card-body",children:[n.err&&e.jsx("div",{className:"alert alert-danger py-2 mb-2",children:n.err}),n.ok&&e.jsx("div",{className:"alert alert-success py-2 mb-2",children:"Sent"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Type"}),e.jsxs("select",{className:"form-select",value:n.mode,onChange:s=>f(a=>({...a,mode:s.target.value,serviceId:"",subscriberEmail:""})),children:[p==="vendor"&&(t==null?void 0:t.vendorId)&&e.jsx("option",{value:"vendor_admin",children:"Ask Admin about my listing"}),p==="user"&&e.jsx("option",{value:"vendor_subscriber",children:"Message Vendor about a subscribed listing"}),p==="vendor"&&(t==null?void 0:t.vendorId)&&e.jsx("option",{value:"vendor_to_subscriber",children:"Message a subscriber of my listing"})]})]}),n.mode==="vendor_admin"&&p==="vendor"&&(t==null?void 0:t.vendorId)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Select one of my listings"}),e.jsxs("select",{className:"form-select",value:n.serviceId,onChange:s=>f(a=>({...a,serviceId:s.target.value})),children:[e.jsx("option",{value:"",children:"Select…"}),ce.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),n.mode==="vendor_subscriber"&&p==="user"&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Select one of my subscriptions"}),e.jsxs("select",{className:"form-select",value:n.serviceId,onChange:s=>f(a=>({...a,serviceId:s.target.value})),children:[e.jsx("option",{value:"",children:"Select…"}),Se.map(s=>e.jsx("option",{value:s.serviceId,children:s.title},s.id))]})]}),n.mode==="vendor_to_subscriber"&&p==="vendor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Select my listing"}),e.jsxs("select",{className:"form-select",value:n.serviceId,onChange:s=>f(a=>({...a,serviceId:s.target.value,subscriberEmail:""})),children:[e.jsx("option",{value:"",children:"Select…"}),ce.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"To (subscriber email)"}),e.jsx("input",{className:"form-control",value:n.subscriberEmail,onChange:s=>{const a=s.target.value;f(r=>({...r,subscriberEmail:a})),$(r=>({...r,q:a,page:1}))},placeholder:"Type to search subscribers",disabled:!n.serviceId}),n.serviceId&&e.jsxs("div",{className:"border rounded mt-2 p-2 bg-base",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("div",{className:"small text-secondary",children:"Suggestions"}),e.jsx("div",{className:"small text-secondary",children:o.loading?"Loading…":`${o.total} total`})]}),e.jsxs("div",{className:"list-group list-group-flush",style:{maxHeight:160,overflowY:"auto"},children:[o.items.map(s=>e.jsx("button",{type:"button",className:"list-group-item list-group-item-action py-1",onClick:()=>f(a=>({...a,subscriberEmail:s.email})),children:s.email},s.id)),!o.loading&&o.items.length===0&&e.jsx("div",{className:"text-muted small px-2 py-1",children:"No matches"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",disabled:o.page<=1||o.loading,onClick:()=>te(n.serviceId,o.q,Math.max(1,o.page-1),o.pageSize),children:"Prev"}),e.jsxs("span",{className:"small text-secondary",children:["Page ",o.page," of ",Math.max(1,Math.ceil((o.total||0)/(o.pageSize||10)))]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",disabled:o.loading||o.page>=Math.ceil((o.total||0)/(o.pageSize||10)),onClick:()=>te(n.serviceId,o.q,o.page+1,o.pageSize),children:"Next"})]})]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Subject (optional)"}),e.jsx("input",{className:"form-control",value:n.subject,onChange:s=>f(a=>({...a,subject:s.target.value}))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Message"}),e.jsx("textarea",{rows:6,className:"form-control",value:n.content,onChange:s=>f(a=>({...a,content:s.target.value}))})]})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:U,disabled:n.sending,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n.sending||!n.serviceId||!n.content.trim()||n.mode==="vendor_to_subscriber"&&!n.subscriberEmail,children:n.sending?"Sending…":"Send"})]})]})]})})]})},es=()=>e.jsx(e.Fragment,{children:e.jsxs(qe,{children:[e.jsx(Be,{title:"Message Center"}),e.jsx(He,{})]})});export{es as default};
