import{i as T,l as k,e as l,j as e,M as $,o as I,p as z,a as U}from"./index-mw4Z2CkO.js";import{B as q}from"./Breadcrumb-B5TdIF_E.js";import{r as m}from"./vendor-C0neu5ZX.js";import{M as p}from"./Modal-CDlYKZZ8.js";import"./firebase-DMviGkW7.js";import"./utils-B2rxisVD.js";import"./index-DbrnFe3V.js";import"./removeClass-yVR4guBs.js";import"./index-DWoOtcwh.js";function H(c){return e.jsxDEV("span",{children:[1,2,3,4,5].map(d=>e.jsxDEV("span",{style:{color:c>=d?"#f5a623":"#ccc",fontSize:16},children:"â˜…"},d,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:60,columnNumber:9},this))},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:58,columnNumber:5},this)}function ee(){const[c,d]=m.useState({open:!1,service:null}),[n,f]=m.useState({open:!1,service:null,rating:0,comment:"",busy:!1,error:""}),[h,D]=m.useState("subscriptions"),[E,F]=m.useState(""),[x,j]=m.useState({}),B=m.useMemo(()=>sessionStorage.getItem("tenantId")||"vendor",[]),{appData:N}=T(),{data:g=[],isLoading:V,refetch:P,isFetching:X}=k({queryKey:["mySubscriptions",l.currentUser?.uid||l.currentUser?.email||"anon"],queryFn:async()=>l.currentUser?await I():[],staleTime:1e3*60*2,enabled:!!l.currentUser}),{data:M=[]}=k({queryKey:["myBookings",l.currentUser?.uid||l.currentUser?.email||"anon"],queryFn:async()=>{if(!l.currentUser)return[];try{const{data:s}=await U.get("/api/subscriptions/bookings/mine",{suppressToast:!0,suppressErrorLog:!0});return Array.isArray(s?.bookings)?s.bookings.map(i=>({id:i.id||"",serviceId:String(i.serviceId||""),serviceTitle:i.serviceTitle||"Unknown Service",vendorName:i.vendorName||i.vendor||"",scheduledDate:i.scheduledDate||"",scheduledSlot:i.scheduledSlot||"",status:i.status||"scheduled",price:Number(i.price||0),bookedAt:i.bookedAt||i.createdAt||"",imageUrl:i.imageUrl||""})):[]}catch{return[]}},staleTime:1e3*60*2,enabled:!!l.currentUser}),o=m.useMemo(()=>new Set(g.filter(s=>(s.type||"service")==="service"&&s.serviceId!=null).map(s=>String(s.serviceId))),[g]),{data:A=[]}=k({queryKey:["subscribedServices",Array.from(o)],queryFn:async()=>{if(!o.size)return[];const s=Math.max(50,Math.min(500,o.size*3));try{const{data:i}=await U.get("/api/data/services",{params:{page:1,pageSize:s},suppressToast:!0,suppressErrorLog:!0}),r=(Array.isArray(i?.items)?i.items:[]).filter(u=>o.has(String(u?.id??""))),t=new Set(r.map(u=>String(u?.id??"")));if(t.size!==o.size&&Array.isArray(N?.services)){const u=N.services,y=[...o].filter(b=>!t.has(b));if(y.length){const b=u.filter(S=>y.includes(String(S?.id??"")));if(b.length)return[...r,...b]}}return r}catch{return Array.isArray(N?.services)?N.services.filter(i=>o.has(String(i?.id??""))):[]}},staleTime:1e3*60*2,enabled:!!l.currentUser&&!!o.size}),L=m.useCallback(()=>P(),[P]);async function w(s){const i=String(s);console.log("ðŸ”„ Starting unsubscribe process for service:",i),console.log("ðŸ”„ Current user:",l.currentUser?.email),console.log("ðŸ”„ Current tenant:",B),j(a=>({...a,[i]:!0}));try{console.log("ðŸ” Fetching current subscriptions before unsubscribe...");const a=await I();console.log("ðŸ“‹ Current subscriptions:",a);const r=a.find(t=>String(t.serviceId)===i);if(console.log("ðŸŽ¯ Target subscription to cancel:",r),!r){console.log("âš ï¸ No subscription found in cache for service:",i),alert(`âœ… Service ${i} removed from your subscriptions (was already cancelled)`);return}console.log("ðŸ“¡ Calling unsubscribeFromService API...");try{const t=await z(i);console.log("âœ… Unsubscribe API success:",t),alert(`âœ… Successfully unsubscribed from service ${i}`)}catch(t){if(t?.response?.status===404)console.log("âš ï¸ Backend says subscription not found (404) - treating as already cancelled"),alert(`âœ… Service ${i} removed from your subscriptions (was already cancelled on server)`);else throw t}console.log("ï¿½ï¸ Clearing subscription from local cache...");try{const t=`sl_subscriptions_cache_v1:${l.currentUser?.uid||l.currentUser?.email}`,u=localStorage.getItem(t);if(u){const b=JSON.parse(u).filter(S=>String(S.serviceId)!==i);localStorage.setItem(t,JSON.stringify(b)),console.log("ðŸ—‘ï¸ Removed subscription from cache, remaining:",b.length)}}catch(t){console.log("âš ï¸ Failed to update cache:",t)}P()}catch(a){console.error("âŒ Failed to unsubscribe:",a),console.error("âŒ Error response:",a?.response),console.error("âŒ Error data:",a?.response?.data),console.error("âŒ Error status:",a?.response?.status);const r=a?.response?.data?.message||a?.message||"Failed to unsubscribe";alert(`âŒ Unsubscribe failed for service ${i}: ${r}`)}finally{j(a=>({...a,[i]:!1})),console.log("ðŸ Unsubscribe process completed for service:",i)}}const v=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}catch{return s}},C=s=>{if(!s)return"";const[i]=s.split(":"),a=parseInt(i,10),r=a>=12?"PM":"AM";return`${a>12?a-12:a===0?12:a}:00 ${r}`},R=(s="scheduled")=>{switch(s.toLowerCase()){case"completed":return"bg-success-600";case"scheduled":return"bg-primary-600";case"canceled":case"cancelled":return"bg-danger-600";default:return"bg-secondary-600"}};return e.jsxDEV($,{children:[e.jsxDEV(q,{title:"My Subscriptions & Bookings"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:274,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"card-header border-bottom py-16 px-24",children:e.jsxDEV("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[e.jsxDEV("div",{className:"d-flex gap-2",children:[e.jsxDEV("button",{type:"button",className:`btn btn-sm ${h==="subscriptions"?"btn-primary-600":"btn-outline-primary"}`,onClick:()=>D("subscriptions"),children:[e.jsxDEV("i",{className:"ri-shopping-cart-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:285,columnNumber:17},this),"Subscriptions (",A.length,")"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:280,columnNumber:15},this),e.jsxDEV("button",{type:"button",className:`btn btn-sm ${h==="bookings"?"btn-primary-600":"btn-outline-primary"}`,onClick:()=>D("bookings"),children:[e.jsxDEV("i",{className:"ri-calendar-check-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:293,columnNumber:17},this),"Bookings (",M.length,")"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:288,columnNumber:15},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:279,columnNumber:13},this),e.jsxDEV("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:L,disabled:V||X,children:X?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:305,columnNumber:19},this),"Refreshingâ€¦"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:304,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("i",{className:"ri-refresh-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:310,columnNumber:19},this),"Refresh"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:309,columnNumber:17},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:297,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:278,columnNumber:11},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:277,columnNumber:9},this),e.jsxDEV("div",{className:"card-body",children:[E&&e.jsxDEV("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsxDEV("i",{className:"ri-error-warning-line me-2"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:320,columnNumber:13},this),E,e.jsxDEV("button",{type:"button",className:"btn-close",onClick:()=>F(""),"aria-label":"Close"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:322,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:319,columnNumber:19},this),V?e.jsxDEV("div",{className:"text-center py-5",children:[e.jsxDEV("div",{className:"spinner-border text-primary-600",role:"status",children:e.jsxDEV("span",{className:"visually-hidden",children:"Loading..."},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:328,columnNumber:17},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:327,columnNumber:15},this),e.jsxDEV("p",{className:"text-secondary mt-3",children:["Loading your ",h,"..."]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:330,columnNumber:15},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:326,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[h==="subscriptions"&&e.jsxDEV("div",{className:"row g-3",children:[A.length===0&&e.jsxDEV("div",{className:"col-12 text-center py-5",children:[e.jsxDEV("i",{className:"ri-shopping-cart-line display-4 text-secondary mb-3"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:339,columnNumber:23},this),e.jsxDEV("h5",{className:"text-secondary",children:"No active subscriptions"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:340,columnNumber:23},this),e.jsxDEV("p",{className:"text-muted",children:"Browse the marketplace to subscribe to services"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:341,columnNumber:23},this),e.jsxDEV("a",{href:"/dashboard",className:"btn btn-primary-600 mt-2",children:[e.jsxDEV("i",{className:"ri-store-2-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:343,columnNumber:25},this),"Browse Marketplace"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:342,columnNumber:23},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:338,columnNumber:21},this),A.map(s=>{const i=g.find(r=>String(r.serviceId)===String(s.id)),a=i?.scheduledDate&&i?.scheduledSlot;return e.jsxDEV("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxDEV("div",{className:"card h-100 shadow-sm hover-shadow",children:[s.imageUrl&&e.jsxDEV("img",{src:s.imageUrl,className:"card-img-top",alt:s.title||"Listing",style:{height:180,objectFit:"cover"}},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:356,columnNumber:29},this),e.jsxDEV("div",{className:"card-body d-flex flex-column",children:[e.jsxDEV("h6",{className:"card-title mb-2",children:s.title||"Listing"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:364,columnNumber:29},this),e.jsxDEV("div",{className:"text-muted small mb-2",children:[e.jsxDEV("i",{className:"ri-building-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:366,columnNumber:31},this),s.vendor||"Unknown Vendor"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:365,columnNumber:29},this),e.jsxDEV("div",{className:"text-muted small mb-2",children:[e.jsxDEV("i",{className:"ri-price-tag-3-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:370,columnNumber:31},this),s.category||"General"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:369,columnNumber:29},this),s.description&&e.jsxDEV("p",{className:"flex-grow-1 text-secondary small mb-3",children:[s.description.slice(0,120),s.description.length>120?"â€¦":""]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:374,columnNumber:31},this),a&&e.jsxDEV("div",{className:"alert alert-info alert-sm p-2 mb-3",children:[e.jsxDEV("i",{className:"ri-calendar-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:380,columnNumber:33},this),e.jsxDEV("small",{children:[e.jsxDEV("strong",{children:"Next Session:"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:382,columnNumber:35},this),e.jsxDEV("br",{},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:382,columnNumber:65},this),v(i.scheduledDate)," at ",C(i.scheduledSlot)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:381,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:379,columnNumber:31},this),e.jsxDEV("div",{className:"d-flex justify-content-between align-items-center mt-auto pt-2 border-top",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{className:"text-primary-600",children:["R ",Number(s.price||0).toLocaleString()]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:389,columnNumber:33},this),s.rating&&e.jsxDEV("div",{className:"small text-muted",children:[e.jsxDEV("i",{className:"ri-star-fill text-warning"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:392,columnNumber:37},this),Number(s.rating).toFixed(1)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:391,columnNumber:35},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:388,columnNumber:31},this),e.jsxDEV("div",{className:"d-flex gap-2",children:[e.jsxDEV("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>d({open:!0,service:s}),children:[e.jsxDEV("i",{className:"ri-eye-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:399,columnNumber:35},this),"View Details"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:398,columnNumber:33},this),e.jsxDEV("button",{className:"btn btn-sm btn-outline-success",onClick:()=>f({open:!0,service:s,rating:0,comment:"",busy:!1,error:""}),children:[e.jsxDEV("i",{className:"ri-star-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:402,columnNumber:35},this),"Review"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:401,columnNumber:33},this),e.jsxDEV("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(s.id),disabled:!!x[String(s.id)],children:x[String(s.id)]?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"spinner-border spinner-border-sm me-1",role:"status"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:411,columnNumber:39},this),"Removingâ€¦"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:410,columnNumber:37},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("i",{className:"ri-close-circle-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:416,columnNumber:39},this),"Unsubscribe"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:415,columnNumber:37},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:404,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:397,columnNumber:31},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:387,columnNumber:29},this),e.jsxDEV(p,{show:c.open,onHide:()=>d({open:!1,service:null}),centered:!0,children:[e.jsxDEV(p.Header,{closeButton:!0,children:e.jsxDEV(p.Title,{children:"Listing Details"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:428,columnNumber:9},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:427,columnNumber:7},this),e.jsxDEV(p.Body,{children:c.service&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h5",{children:c.service.title},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:433,columnNumber:13},this),e.jsxDEV("div",{className:"mb-2 text-muted",children:c.service.vendor},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:434,columnNumber:13},this),e.jsxDEV("div",{className:"mb-2",children:["Category: ",c.service.category]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:435,columnNumber:13},this),e.jsxDEV("div",{className:"mb-2",children:["Price: R ",Number(c.service.price||0).toLocaleString()]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:436,columnNumber:13},this),e.jsxDEV("div",{className:"mb-2",children:["Rating: ",H(Number(c.service.rating||0))," ",Number(c.service.rating||0).toFixed(1)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:437,columnNumber:13},this),e.jsxDEV("div",{className:"mb-2",children:c.service.description},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:438,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:432,columnNumber:11},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:430,columnNumber:7},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:426,columnNumber:5},this),e.jsxDEV(p,{show:n.open,onHide:()=>f({open:!1,service:null,rating:0,comment:"",busy:!1,error:""}),centered:!0,children:[e.jsxDEV(p.Header,{closeButton:!0,children:e.jsxDEV(p.Title,{children:"Review Listing"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:447,columnNumber:9},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:446,columnNumber:7},this),e.jsxDEV(p.Body,{children:n.service&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"mb-2",children:n.service.title},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:452,columnNumber:13},this),e.jsxDEV("div",{className:"mb-3",children:[1,2,3,4,5].map(r=>e.jsxDEV("button",{type:"button",onClick:()=>f(t=>({...t,rating:r})),className:"btn btn-link p-0 me-1","aria-label":`Rate ${r} stars`,children:e.jsxDEV("span",{style:{fontSize:24,color:n.rating>=r?"#f5a623":"#ccc"},children:"â˜…"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:456,columnNumber:19},this)},r,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:455,columnNumber:17},this))},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:453,columnNumber:13},this),e.jsxDEV("textarea",{className:"form-control mb-3",rows:3,placeholder:"Write a quick comment (optional)",value:n.comment,onChange:r=>f(t=>({...t,comment:r.target.value}))},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:460,columnNumber:13},this),n.error&&e.jsxDEV("div",{className:"alert alert-danger py-2",children:n.error},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:461,columnNumber:35},this),e.jsxDEV("div",{className:"btn btn-primary",style:{pointerEvents:"none",opacity:.7},children:n.busy?"Submittingâ€¦":"Submit review"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:463,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:451,columnNumber:11},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:449,columnNumber:7},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:445,columnNumber:5},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:363,columnNumber:27},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:354,columnNumber:25},this)},String(s.id),!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:353,columnNumber:23},this)})]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:336,columnNumber:17},this),h==="bookings"&&e.jsxDEV("div",{className:"row g-3",children:[M.length===0&&e.jsxDEV("div",{className:"col-12 text-center py-5",children:[e.jsxDEV("i",{className:"ri-calendar-check-line display-4 text-secondary mb-3"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:483,columnNumber:23},this),e.jsxDEV("h5",{className:"text-secondary",children:"No bookings found"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:484,columnNumber:23},this),e.jsxDEV("p",{className:"text-muted",children:"Book service sessions to see them here"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:485,columnNumber:23},this),e.jsxDEV("a",{href:"/dashboard",className:"btn btn-primary-600 mt-2",children:[e.jsxDEV("i",{className:"ri-calendar-event-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:487,columnNumber:25},this),"Book a Session"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:482,columnNumber:21},this),M.map(s=>e.jsxDEV("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxDEV("div",{className:"card h-100 shadow-sm hover-shadow",children:e.jsxDEV("div",{className:"card-body",children:[e.jsxDEV("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[e.jsxDEV("h6",{className:"card-title mb-0",children:s.serviceTitle},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:497,columnNumber:29},this),e.jsxDEV("span",{className:`badge ${R(s.status)}`,children:s.status||"Scheduled"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:498,columnNumber:29},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:496,columnNumber:27},this),s.vendorName&&e.jsxDEV("div",{className:"text-muted small mb-2",children:[e.jsxDEV("i",{className:"ri-building-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:505,columnNumber:31},this),s.vendorName]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:504,columnNumber:29},this),s.scheduledDate&&e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("div",{className:"d-flex align-items-center text-primary-600 mb-1",children:[e.jsxDEV("i",{className:"ri-calendar-event-fill me-2"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:513,columnNumber:33},this),e.jsxDEV("strong",{children:v(s.scheduledDate)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:514,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:512,columnNumber:31},this),s.scheduledSlot&&e.jsxDEV("div",{className:"d-flex align-items-center text-muted ms-4",children:[e.jsxDEV("i",{className:"ri-time-line me-2"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:518,columnNumber:35},this),C(s.scheduledSlot)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:517,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:511,columnNumber:29},this),s.price&&s.price>0&&e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("i",{className:"ri-money-dollar-circle-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:527,columnNumber:31},this),e.jsxDEV("strong",{children:["R ",Number(s.price||0).toLocaleString()]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:528,columnNumber:31},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:526,columnNumber:29},this),s.bookedAt&&e.jsxDEV("div",{className:"text-muted small",children:[e.jsxDEV("i",{className:"ri-calendar-check-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:534,columnNumber:31},this),"Booked on ",v(s.bookedAt)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:533,columnNumber:29},this),e.jsxDEV("div",{className:"mt-3 pt-3 border-top",children:e.jsxDEV("div",{className:"d-flex gap-2",children:[e.jsxDEV("button",{className:"btn btn-sm btn-outline-primary flex-grow-1",onClick:()=>window.location.href=`/marketplace-details?id=${s.serviceId}`,children:[e.jsxDEV("i",{className:"ri-eye-line me-1"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:545,columnNumber:33},this),"View Service"]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:541,columnNumber:31},this),s.status?.toLowerCase()==="scheduled"&&e.jsxDEV("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(s.serviceId),disabled:!!x[s.serviceId],title:"Cancel booking",children:e.jsxDEV("i",{className:"ri-close-line"},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:555,columnNumber:35},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:549,columnNumber:33},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:540,columnNumber:29},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:539,columnNumber:27},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:495,columnNumber:25},this)},void 0,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:494,columnNumber:23},this)},s.id,!1,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:493,columnNumber:21},this))]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:480,columnNumber:17},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:333,columnNumber:13},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:318,columnNumber:9},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:276,columnNumber:7},this)]},void 0,!0,{fileName:"/Applications/XAMPP/xamppfiles/htdocs/firebase sloane hub/ui/marketplace-ui-react/src/pages/MySubscriptionsPage.tsx",lineNumber:273,columnNumber:5},this)}export{ee as default};
