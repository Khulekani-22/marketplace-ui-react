import{r as n,j as e}from"./index-7-v0jUWh.js";import{I as p}from"./iconify-BSamAZK7.js";import{M as $}from"./MasterLayout-SmJzx4r8.js";import{a as B}from"./appData-CcG0uR8Q.js";const E="sloane_academy_progress_v2",k="https://storage.googleapis.com/coverr-main/mp4/Mt_Baker.mp4",o=B;function D(){try{const t=localStorage.getItem(E);if(!t)return new Set;const r=JSON.parse(t);return Array.isArray(r)?new Set(r.filter(g=>typeof g=="string")):new Set}catch{return new Set}}function W(t){try{const r=Array.from(t);localStorage.setItem(E,JSON.stringify(r))}catch{}}function v(t){if(!t)return 0;const r=t.match(/(\d+(?:\.\d+)?)/);return r?Number(r[1]):0}function _(t){if(!t)return"To be announced";const r=new Date(t);return Number.isNaN(r.getTime())?"To be announced":new Intl.DateTimeFormat("en-ZA",{weekday:"short",day:"numeric",month:"short"}).format(r)}function O(t){if(!t)return k;const r=(t==null?void 0:t.videoUrl)||(t==null?void 0:t.video)||null;return typeof r=="string"&&r.startsWith("http")?r:k}function U(){const t=n.useMemo(()=>Array.isArray(o==null?void 0:o.cohorts)?o.cohorts:[],[]),[r,g]=n.useState(D),[w,I]=n.useState(()=>{var s;return((s=t[0])==null?void 0:s.id)??""}),[m,N]=n.useState(()=>{var s,a,l;return((l=(a=(s=t[0])==null?void 0:s.courses)==null?void 0:a[0])==null?void 0:l.id)??""}),[A,b]=n.useState(()=>{var s,a,l;return((l=(a=(s=t[0])==null?void 0:s.courses)==null?void 0:a[0])==null?void 0:l.id)??""});n.useEffect(()=>W(r),[r]);const d=n.useMemo(()=>t.find(s=>s.id===w)||t[0]||null,[t,w]),i=n.useMemo(()=>Array.isArray(d==null?void 0:d.courses)?d.courses:[],[d]);n.useEffect(()=>{var s;if(!i.length){N(""),b("");return}if(!i.some(a=>a.id===m)){const a=((s=i[0])==null?void 0:s.id)??"";N(a),b(a)}},[i,m]),n.useEffect(()=>{m&&b(m)},[m]);const c=n.useMemo(()=>i.find(s=>s.id===m)||null,[i,m]),x=n.useMemo(()=>{const s=[];return t.forEach(a=>{var l;(l=a==null?void 0:a.courses)==null||l.forEach(h=>{h!=null&&h.id&&s.push({course:h,cohort:a})})}),s},[t]),j=x.length,f=n.useMemo(()=>x.filter(s=>r.has(s.course.id)).length,[x,r]),u=j?Math.round(f/j*100):0,C=n.useMemo(()=>x.reduce((s,a)=>s+v(a.course.duration),0),[x]),P=n.useMemo(()=>i.map(s=>{const a=v(s.duration),l=r.has(s.id);return{id:s.id,title:s.title,description:s.description,thumbnail:s.videoThumbnail,minutes:a,completed:l}}),[i,r]),S=n.useMemo(()=>{const s=Array.isArray(o==null?void 0:o.events)?o.events:[],a=new Date;return s.filter(l=>{if(!(l!=null&&l.date))return!0;const h=new Date(l.date);return!Number.isNaN(h.getTime())&&h>=a}).slice(0,3)},[]);function M(s){var a;if(s){N(s),b(s);try{(a=document.getElementById("sloane-progress"))==null||a.scrollIntoView({behavior:"smooth",block:"start"})}catch{}}}function T(s){s&&g(a=>{const l=new Set(a);return l.add(s),l})}function V(s){g(a=>{const l=new Set(a);return l.delete(s),l})}const y=c?r.has(c.id):!1;return e.jsx($,{children:e.jsx("div",{className:"container-fluid py-4",children:e.jsxs("div",{className:"row g-24",children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card radius-16 border-0 shadow-sm p-24 bg-base",children:e.jsxs("div",{className:"row g-16 align-items-center",children:[e.jsxs("div",{className:"col-12 col-lg-7",children:[e.jsx("span",{className:"badge bg-primary-100 text-primary-700 mb-12",children:"Sloane Academy"}),e.jsx("h1",{className:"mb-12",children:"Video-led learning journeys for African founders & operators"}),e.jsx("p",{className:"text-secondary-light mb-16",children:"Watch partner-powered modules end-to-end to unlock completion. Switch programmes to explore other academies and keep your knowledge current."}),e.jsxs("div",{className:"d-flex flex-wrap gap-12",children:[e.jsx("button",{type:"button",className:"btn btn-primary-600 px-24",onClick:()=>{var s;return(s=document.getElementById("sloane-cohort-selector"))==null?void 0:s.scrollIntoView({behavior:"smooth"})},children:"Browse programmes"}),e.jsx("button",{type:"button",className:"btn btn-outline-primary-600 px-24",onClick:()=>{var s;return(s=document.getElementById("sloane-progress"))==null?void 0:s.scrollIntoView({behavior:"smooth"})},children:"View my progress"})]})]}),e.jsx("div",{className:"col-12 col-lg-5",children:e.jsxs("div",{className:"card border-0 radius-16 bg-base p-24 h-100",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-16",children:[e.jsx("h6",{className:"mb-0",children:"Overall progress"}),e.jsxs("span",{className:"badge bg-primary-50 text-primary-700",children:[u,"%"]})]}),e.jsxs("p",{className:"text-secondary-light mb-20",children:["You have completed ",f," of ",j," video modules across partner programmes."]}),e.jsxs("div",{className:"d-flex align-items-center gap-16",children:[e.jsx("div",{className:"progress flex-grow-1",style:{height:12},children:e.jsx("div",{className:"progress-bar bg-primary-600",role:"progressbar",style:{width:`${u}%`},"aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100})}),e.jsxs("span",{className:"fw-medium text-primary-700",children:[u,"%"]})]}),e.jsxs("div",{className:"mt-20 d-flex flex-wrap gap-16",children:[e.jsxs("div",{className:"d-flex align-items-center gap-8",children:[e.jsx(p,{icon:"mdi:account-group",className:"text-primary-500",width:24,height:24}),e.jsxs("span",{className:"text-secondary-light",children:[t.length," partner tracks"]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-8",children:[e.jsx(p,{icon:"mdi:clock-outline",className:"text-warning-500",width:24,height:24}),e.jsxs("span",{className:"text-secondary-light",children:["~",Math.max(1,Math.round(C/60))," hrs of content"]})]})]})]})})]})})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row g-16",children:[e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Programmes"}),e.jsx("h3",{className:"mt-12 mb-0",children:t.length})]})}),e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Modules"}),e.jsx("h3",{className:"mt-12 mb-0",children:j})]})}),e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Completed"}),e.jsx("h3",{className:"mt-12 mb-0",children:f})]})}),e.jsx("div",{className:"col-6 col-md-3",children:e.jsxs("div",{className:"card radius-12 p-16 h-100 border-0 bg-base",children:[e.jsx("span",{className:"text-secondary-light",children:"Completion"}),e.jsxs("h3",{className:"mt-12 mb-0",children:[u,"%"]})]})})]})}),e.jsx("div",{className:"col-12",id:"sloane-cohort-selector",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base",children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-12 mb-20",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4",children:"Partner programmes"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Switch academies to watch partner videos and track completion."})]}),e.jsx("div",{children:e.jsx("select",{className:"form-select btn btn-outline-primary-600 border rounded-pill px-24",value:(d==null?void 0:d.id)??"",onChange:s=>I(s.target.value),"aria-label":"Select partner programme",children:t.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})})]}),i.length?e.jsx("div",{className:"accordion",id:"module-accordion",role:"tablist",children:P.map(s=>{const a=A===s.id;return e.jsxs("div",{className:"accordion-item border radius-12 mb-12 bg-base",children:[e.jsx("h2",{className:"accordion-header",id:`module-head-${s.id}`,children:e.jsxs("button",{type:"button",className:`accordion-button d-flex gap-16 align-items-center ${a?"":"collapsed"}`,onClick:()=>M(s.id),"aria-expanded":a,"aria-controls":`module-panel-${s.id}`,children:[s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:"",className:"rounded",style:{width:80,height:56,objectFit:"cover"}}):e.jsx("div",{className:"rounded bg-neutral-100 d-flex align-items-center justify-content-center",style:{width:80,height:56},children:e.jsx(p,{icon:"mdi:play-circle-outline",width:28,height:28,className:"text-primary-500"})}),e.jsxs("div",{className:"flex-grow-1 text-start",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-12",children:[e.jsx("span",{className:"fw-medium",children:s.title}),e.jsx("span",{className:`badge ${s.completed?"bg-success-100 text-success-700":"bg-neutral-100 text-neutral-700"}`,children:s.completed?"Completed":"Pending"})]}),e.jsxs("small",{className:"text-secondary-light",children:[s.minutes||30," min video"]})]})]})}),e.jsx("div",{id:`module-panel-${s.id}`,className:`accordion-collapse collapse ${a?"show":""}`,"aria-labelledby":`module-head-${s.id}`,"data-bs-parent":"#module-accordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsx("p",{className:"text-secondary-light mb-12",children:s.description||"This module description will be added soon."}),e.jsxs("div",{className:"d-flex flex-wrap gap-12 text-secondary-light",children:[e.jsxs("span",{className:"d-flex align-items-center gap-8",children:[e.jsx(p,{icon:"mdi:clock-outline",width:18,height:18})," ",s.minutes||30," min"]}),e.jsxs("span",{className:"d-flex align-items-center gap-8",children:[e.jsx(p,{icon:s.completed?"mdi:check-circle":"mdi:checkbox-blank-circle-outline",width:18,height:18,className:s.completed?"text-success-500":"text-neutral-400"}),s.completed?"Watched":"Not watched yet"]})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary-600 mt-16",onClick:()=>M(s.id),children:"Watch module"})]})})]},s.id)})}):e.jsx("div",{className:"alert alert-warning mb-0",children:"This programme does not have any modules yet."})]})}),e.jsx("div",{className:"col-12",id:"sloane-progress",children:e.jsxs("div",{className:"row g-24",children:[e.jsx("div",{className:"col-12 col-xl-8",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base h-100",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-20",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4",children:(c==null?void 0:c.title)||"Module detail"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Watch the full video to automatically mark the module as complete."})]}),c&&y&&e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary-600",onClick:()=>V(c.id),children:"Reset module"})]}),c?e.jsxs("div",{className:"d-flex flex-column gap-16",children:[e.jsx("div",{className:"ratio ratio-16x9 radius-16 overflow-hidden bg-neutral-100",children:e.jsxs("video",{controls:!0,poster:c.videoThumbnail,onEnded:()=>T(c.id),style:{width:"100%",height:"100%",objectFit:"cover"},children:[e.jsx("source",{src:O(c),type:"video/mp4"}),"Your browser does not support embedded videos."]},c.id)}),e.jsxs("div",{className:"d-flex flex-wrap gap-12 align-items-center",children:[e.jsx("span",{className:`badge ${y?"bg-success-100 text-success-700":"bg-warning-100 text-warning-700"}`,children:y?"Completed":"Watch to complete"}),e.jsxs("span",{className:"text-secondary-light",children:["Duration · ",v(c.duration)||30," min"]})]}),e.jsx("p",{className:"text-secondary-light mb-0",children:c.description})]}):e.jsx("div",{className:"alert alert-warning mb-0",children:"Select a module to start watching."})]})}),e.jsx("div",{className:"col-12 col-xl-4",children:e.jsxs("div",{className:"card radius-16 p-24 border-0 bg-base",children:[e.jsx("h5",{className:"mb-12",children:"Upcoming experiences"}),S.length?e.jsx("ul",{className:"list-unstyled mb-0 d-flex flex-column gap-16",children:S.map(s=>e.jsxs("li",{className:"border radius-12 p-16",children:[e.jsxs("div",{className:"d-flex align-items-center gap-12 mb-8",children:[e.jsx("span",{className:"badge bg-primary-50 text-primary-700",children:s.type||"Learning"}),e.jsxs("span",{className:"text-secondary-light",children:[_(s.date)," · ",s.time||"TBA"]})]}),e.jsx("h6",{className:"mb-4",children:s.title}),e.jsx("p",{className:"text-secondary-light mb-8",children:s.host}),e.jsx("p",{className:"text-secondary-light mb-0",children:s.location||"Virtual"})]},s.id))}):e.jsx("p",{className:"text-secondary-light mb-0",children:"No upcoming events yet. Keep an eye on the partner bulletin."})]})})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card radius-16 p-24 border-0 bg-base",children:e.jsxs("div",{className:"row g-16 align-items-center",children:[e.jsxs("div",{className:"col-12 col-md-8",children:[e.jsx("h5",{className:"mb-8",children:"Need a facilitator or learning support?"}),e.jsx("p",{className:"text-secondary-light mb-0",children:"Share feedback with the Sloane Academy team for coaching requests, facilitator sessions, or to unlock partner resources."})]}),e.jsx("div",{className:"col-12 col-md-4 text-md-end",children:e.jsx("a",{className:"btn btn-outline-primary-600",href:"mailto:academy@22onsloane.co",children:"Email the academy team"})})]})})})]})})})}export{U as default};
