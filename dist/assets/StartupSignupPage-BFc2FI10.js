import{u as f,o as v,r as c,j as e,L as j,x as w,a as u,y as N,z as S,w as P,b as k}from"./index-CDEs_jt0.js";function I(){const h=f(),{search:p}=v(),g=new URLSearchParams(p).get("next")||"/dashboard",[r,x]=c.useState({name:"",email:"",password:"",agree:!1}),[o,d]=c.useState(!1),[m,l]=c.useState("");function n(a,s){x(t=>({...t,[a]:s}))}async function y(a){try{await k.post("/api/users",{email:a,tenantId:"basic",role:"member"})}catch{}}async function b(a){if(a.preventDefault(),l(""),!r.agree){l("Please agree to the Terms and Privacy Policy.");return}d(!0);try{let s;try{s=(await w(u,r.email,r.password)).user}catch(i){if((i==null?void 0:i.code)==="auth/email-already-in-use")s=(await N(u,r.email,r.password)).user;else throw i}if(r.name)try{await S(s,{displayName:r.name})}catch{}const t=(s.email||r.email).toLowerCase();sessionStorage.setItem("userEmail",t),sessionStorage.setItem("role","member"),sessionStorage.setItem("tenantId","basic"),await y(t);try{await P({action:"STARTUP_SIGNUP",userEmail:t,targetType:"user"})}catch{}h(g,{replace:!0})}catch(s){const t=(s==null?void 0:s.code)||"";l(t==="auth/weak-password"?"Password is too weak (min 8 chars).":(s==null?void 0:s.message)||"Sign up failed")}finally{d(!1)}}return e.jsxs("div",{className:"container py-4",style:{maxWidth:720},children:[e.jsx("h1",{className:"h3 mb-2",children:"Join as a Startup"}),e.jsx("p",{className:"text-secondary",children:"Create an account to access your dashboard. You can upgrade anytime by signing up as a vendor to list services and gain more privileges."}),m&&e.jsx("div",{className:"alert alert-danger",children:m}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Your name or startup name"}),e.jsx("input",{className:"form-control",value:r.name,onChange:a=>n("name",a.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",value:r.email,onChange:a=>n("email",a.target.value),required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",value:r.password,onChange:a=>n("password",a.target.value),required:!0})]}),e.jsx("div",{className:"col-md-6 d-flex align-items-end",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{id:"agree",className:"form-check-input",type:"checkbox",checked:r.agree,onChange:a=>n("agree",a.target.checked)}),e.jsx("label",{htmlFor:"agree",className:"form-check-label ms-2",children:"I agree to the Terms & Privacy"})]})})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx("button",{className:"btn rounded-pill text-primary-50 hover-text-primary-200 bg-primary-500 bg-hover-primary-800 radius-8 px-12 py-6",disabled:o,children:o?"Creatingâ€¦":"Create account"}),e.jsx(j,{to:"/signup/vendor",className:"btn rounded-pill border text-neutral-500 border-neutral-700 radius-8 px-12 py-6 bg-hover-primary-700 text-hover-white",children:"Become a Vendor"})]})]})})})]})}export{I as default};
